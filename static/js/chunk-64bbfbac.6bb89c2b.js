(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64bbfbac"],{1311:function(e,t,a){"use strict";var r=a("8db0"),n=a.n(r);n.a},"3e16":function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"s",(function(){return i})),a.d(t,"r",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"j",(function(){return c})),a.d(t,"m",(function(){return u})),a.d(t,"l",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return h})),a.d(t,"k",(function(){return g})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"i",(function(){return S})),a.d(t,"q",(function(){return y})),a.d(t,"p",(function(){return F})),a.d(t,"t",(function(){return D})),a.d(t,"o",(function(){return w})),a.d(t,"u",(function(){return _}));var r=a("b775");function n(e){return Object(r["a"])({url:"/api/Document/GetProfessionnalTitleViewList",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/api/Document/getPersonProfessionnalTitle",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/api/Document/getInstitutions",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/api/Document/DeleteDocumentApprovalProcess",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/api/Document/GetDocumentApprovalProcess",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/api/Document/UpdateDocumentApprovalProcess",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/api/Document/GetDocumentApprovalProcessList",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/api/Document/addDocumentApprovalProcess",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/api/Document/AddDocumentPublish",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/api/Document/GetDocumentPublishViewPageList",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/api/Document/GetDocumentPublish",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/api/Document/UpdateDocumentPublish",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/api/Document/ApproveDocumentPublish",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/api/Document/ConfirmDocumentPublish",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/api/Document/getBookSiteInfoPageList",method:"get",params:e})}function S(e){return Object(r["a"])({url:"/api/Global/GetRegionList",method:"get",params:e})}function y(e){return Object(r["a"])({url:"/api/Document/GetDocumentReceiveViewPageList",method:"get",params:e})}function F(e){return Object(r["a"])({url:"/api/Document/GetDocumentReceiveReadingViewPageList",method:"get",params:e})}function D(e){return Object(r["a"])({url:"/api/Document/Proposed",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/api/Document/GetDocumentReceive",method:"get",params:e})}function _(e){return Object(r["a"])({url:"/api/Document/Reading",method:"post",data:e})}},"51e5":function(e,t,a){"use strict";var r=a("60fe"),n=a("ed08");t["a"]={data:function(){var e=this;return{laterData:"",sonRefresh:!0,createUserId:"",createOid:"",isShowSign:!1,isShowApp:!0,limitSize:r["f"][1].limitSize||"",KBId:0,routeName:"",isEditc:!1,kType:0,getMyDetail:"",form:{title:"",isTop:0,attachment:[],removeFileList:[],content:""},formRules:{attachment:[{type:"array",required:!0,message:"请上传附件",trigger:"change"}]},isBack:!1,isBackc:!1,files:{state:[],file:[],isSuc:""},urlAnnex:"",removeFiles:{id:[],fileName:[],name:[],url:[],webupurl:[]},searchPanelActive:!0,global:{isSubmit:!0,showSubmit:!0},searchForm:{time:[],audit_type:"",receive_type:"",search_key:"",timer_type:""},tableLoading:!1,columns:[{title:"公文号",key:"DocumentNo","min-width":"120px"},{title:"标题",key:"Title",headerAlign:"center","min-width":"250px"},{title:"创建人",key:"CreateUName",align:"center","min-width":"200px"},{title:"发文人",key:"PublishUName",align:"center","min-width":"200px"},{title:"审批人",key:"ApprovalUName",align:"center","min-width":"200px"},{title:"发文时间",key:"PublishTime",align:"center","min-width":"140px",formatter:function(e,t,a,r){var i="-";return e.PublishTime?Object(n["e"])(e.PublishTime,"{y}-{m}-{d} {h}:{i}:{s}"):i}},{title:"公文状态",slot:"ApprovalStatus"},{title:"签收状态",key:"SignStatus",align:"center",formatter:function(e,t,a,r){var n="-";switch(e.SignStatus){case 0:n="待发文";break;case 1:n="待签收";break;case 2:n="部分签收";break;case 3:n="已签收";break}return 1===e.ApprovalStatus||4===e.ApprovalStatus||2===e.ApprovalStatus?(n="-",n):n}},{title:"签收时间",key:"SignTime",align:"center","min-width":"140px",formatter:function(e,t,a,r){var i="-";return e.SignTime?Object(n["e"])(e.SignTime,"{y}-{m}-{d} {h}:{i}:{s}"):i}},{title:"状态1",key:"AuditStatus",slot:"AuditStatus"},{title:"状态2",key:"AuditStatus",slot:"SignStatus"}],tableData:[],selectionRow:{align:"center"},tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:10},fileList:[],isShow1:!0,isShow2:!1,isSureState:"",lineLable:"",signArr:[{value:0,label:"按层级"},{value:1,label:"指定单位"}],signArr1:[{value:0,label:"按层级"},{value:1,label:"指定单位"}],signArr2:[],signArr2c:[],signArr3c:[],oddForm:{signArrc:""},treeData:[{value:1,label:"【鉴定点】",children:[{value:4,label:"站长",children:[{value:9,label:"站长A"}]},{value:41,label:"副站长",children:[{value:411,label:"副站长A"},{value:413,label:"副站长B"}]}]},{value:2,label:"一级 2",children:[{value:5,label:"二级 2-1"},{value:6,label:"二级 2-2"}]},{value:3,label:"一级 3",children:[{value:7,label:"二级 3-1"},{value:8,label:"二级 3-2"}]}],treeDataOdd:[{value:0,label:"审批流程"},{value:1,label:"审批人"},{value:2,label:"无需审批"}],treeDataOdd1:[{value:0,label:"安联大厦咖啡机"}],elForm:{status:[],status1:"",receiptMan:"",receiptMan1:[],receiptManc:[],receiptMan4c:"",reviewerMan:"站长a，站b",offNO:"",title:"",content:""},elFormRules:{status:[{required:!0,message:"请选择审批流程",trigger:"change"}],receiptMan:[{required:!0,message:"请选择签收单位",trigger:"change"}],receiptMan1:[{required:!0,message:"请选择签收单位",trigger:"change"}],receiptManc:[{required:!0,message:"请选择审核人",trigger:"change"}],offNO:[{required:!0,message:"请输入公文号",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"change"}],attachment:[{required:!0,validator:function(t,a,r){var n=e.fileList.length;if(!n)return r(new Error("请选择上传附件(至少一个)"))},trigger:"change"}]},shareFormVisible:!1,shareForm:{shareMan:[],offNO:"鲁消字[2020]6号",title:"Central Research Consultant",content:"1<br/>2",attachment:[{title:"中文.doc",href:"www.baidu.com"}]},shareFormRules:{shareMan:[{required:!0,message:"请选择转发人",trigger:"change"}]},indexRow:{title:"序号",align:"center",width:60},isDetail:!1,detailFormVisible:!1,innerVisible:!1,appID:"",detailForm:{receiptMan:"",shareMan:"",reviewerMan:"",offNO:"",title:"",content:"",attachment:[{SourceName:"",AnnexName:"www.baidu.com"}],reviewerTableData:[{man:"",man1:"",man2:"",status:""}],reviewerTableData2:[{man:"",man1:"",man2:"",status:""}]},isAudit:!1,rejectedForm:{desc:""},rejectedFormRules:{desc:[{required:!0,message:"请填写审批意见",trigger:"blur"}]}}}}},"60fe":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return l}));var r=["image/png","image/jpeg","image/jpg","image/gif"],n="image/png,image/jpeg,image/jpg,image/gif",i=["pdf","doc","docx","ppt","xls","xlsx"],s="".concat("http://172.16.3.14:8008/","images/Upload/TempPic"),o="".concat("http://172.16.3.14:8008/","images/Upload/TempFile"),l=[{txt:"图片",limitSize:800,type:["png","jpeg","jpg","gif"]},{txt:"文件",limitSize:2048,type:["pdf","doc","docx","ppt","pptx","xls","xlsx","wps"]},{txt:"视频",limitSize:51200,type:["mp4"]}]},"8bec":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[a("bar",{attrs:{slot:"title"},slot:"title"},[a("bar-space"),a("bar-cell",[a("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:function(t){return e.doRefresh({pageIndex:e.pagination.currentPage,pageSize:e.pagination.pageSize})}}},[e._v("刷新")])],1),a("bar-cell",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}]},[a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",size:e.tableSize},on:{click:e.doCreate}},[e._v("发送公文")])],1)],1),a("el-form",{ref:"searchForm",attrs:{inline:"","label-position":"top",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"时间选择",prop:"receive_type"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.timer_type,callback:function(t){e.$set(e.searchForm,"timer_type",t)},expression:"searchForm.timer_type"}},[a("el-option",{attrs:{label:"发文时间",value:"0"}}),a("el-option",{attrs:{label:"签收时间",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"日期范围"}},[a("date-range-picker",{model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),a("el-form-item",{attrs:{label:"审核状态",prop:"audit_type"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.audit_type,callback:function(t){e.$set(e.searchForm,"audit_type",t)},expression:"searchForm.audit_type"}},[a("el-option",{attrs:{label:"无需审批",value:"0"}}),a("el-option",{attrs:{label:"待审批",value:"1"}}),a("el-option",{attrs:{label:"审批中",value:"2"}}),a("el-option",{attrs:{label:"已审核",value:"3"}}),a("el-option",{attrs:{label:"驳回",value:"4"}})],1)],1),a("el-form-item",{attrs:{label:"签收状态",prop:"receive_type"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.receive_type,callback:function(t){e.$set(e.searchForm,"receive_type",t)},expression:"searchForm.receive_type"}},[a("el-option",{attrs:{label:"待发文",value:"0"}}),a("el-option",{attrs:{label:"待签收",value:"1"}}),a("el-option",{attrs:{label:"部分签收",value:"2"}}),a("el-option",{attrs:{label:"已签收",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入文号或者标题关键字",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.searchFormReset("searchForm")}}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{"index-row":e.indexRow,loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[a("el-table-column",{attrs:{slot:"ApprovalStatus",label:"公文状态",align:"center","min-width":"90"},slot:"ApprovalStatus",scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("table-popover",{attrs:{status:t.ApprovalStatus,width:90,content:t.ApprovalContent}})]}}])}),a("el-table-column",{attrs:{slot:"operate",label:"操作",width:"220",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0==r.ApprovalStatus&&0==r.SignStatus&&r.CreateUID==e.createUserId||4==r.ApprovalStatus&&r.CreateUID==e.createUserId||0==r.SignStatus&&3==r.ApprovalStatus&&r.CreateUID==e.createUserId?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("修改")]):e._e(),1==r.ApprovalStatus&&1==r.ShowApprove||2==r.ApprovalStatus&&1==r.ShowApprove?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"approval",expression:"'approval'"}],attrs:{type:"danger"},on:{click:function(t){return e.handleReviewer(r)}}},[e._v("审批")]):e._e(),a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"look",expression:"'look'"}],on:{click:function(t){return e.handleDetails(r)}}},[e._v("查看")]),0==r.ApprovalStatus&&0==r.SignStatus&&r.CreateUID==e.createUserId||3==r.ApprovalStatus&&0==r.SignStatus&&r.CreateUID==e.createUserId?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}],attrs:{type:"success"},on:{click:function(t){return e.handleShare(r)}}},[e._v("确认发文")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"转发公文","destroy-on-close":"",visible:e.shareFormVisible,"before-close":e.closeShareForm}},[a("el-form",{ref:"shareForm",attrs:{"label-position":"right","label-width":"120px",model:e.shareForm,size:e.tableSize,rules:e.shareFormRules}},[a("el-form-item",{attrs:{label:"转发人",prop:"shareMan"}},[a("el-cascader",{staticClass:"width-full",attrs:{placeholder:"输入关键字进行过滤",filterable:"",options:e.treeData,props:{multiple:!0}},model:{value:e.shareForm.shareMan,callback:function(t){e.$set(e.shareForm,"shareMan",t)},expression:"shareForm.shareMan"}})],1),a("el-form-item",{attrs:{label:"公文号"}},[a("span",[e._v(e._s(e.shareForm.offNO))])]),a("el-form-item",{attrs:{label:"标题"}},[a("span",[e._v(e._s(e.shareForm.title))])]),a("el-form-item",{attrs:{label:"内容"}},[a("div",{domProps:{innerHTML:e._s(e.shareForm.content)}})]),a("el-form-item",{attrs:{label:"附件"}},e._l(e.shareForm.attachment,(function(t,r){return a("div",{key:r},[a("el-link",{attrs:{icon:"el-icon-files",href:t.href,target:"_blank"}},[e._v(e._s(t.title))])],1)})),0)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmShareForm("shareForm")}}},[e._v("发送")])],1)],1),a("el-dialog",{attrs:{"destroy-on-close":"",title:e.isDetail?"详情":"审核",visible:e.detailFormVisible,"before-close":e.detailFormClose}},[a("el-form",{ref:"detailForm",attrs:{model:e.detailForm,size:e.tableSize,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"签收单位"}},[a("span",[e._v(e._s(e.detailForm.receiptMan))])]),a("el-form-item",{attrs:{label:"审核人"}},[a("span",[e._v(e._s(e.detailForm.reviewerMan))])]),a("el-divider"),a("el-form-item",{attrs:{label:"公文号"}},[a("span",[e._v(e._s(e.detailForm.offNO))])]),a("el-form-item",{attrs:{label:"标题"}},[a("span",[e._v(e._s(e.detailForm.title))])]),a("el-form-item",{attrs:{label:"内容"}},[a("div",{staticClass:"viewContent",domProps:{innerHTML:e._s(e.detailForm.content)}})]),a("el-form-item",{attrs:{label:"附件"}},e._l(e.detailForm.attachment,(function(t,r){return a("div",{key:r},[a("el-link",{attrs:{icon:"el-icon-files",href:e.urlAnnex+t.AnnexName,target:"_blank"}},[e._v(e._s(t.SourceName))])],1)})),0),e.isShowApp?a("el-form-item",{attrs:{label:"审批记录"}},[a("el-table",{attrs:{border:"",data:e.detailForm.reviewerTableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man",label:"审批人"}}),a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man1",label:"审批时间"}}),a("el-table-column",{staticStyle:{width:"30%"},attrs:{prop:"status",label:"审核结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.status))])]}}],null,!1,1127553567)}),a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man2",label:"审批意见"}})],1)],1):e._e(),e.isShowSign?a("el-form-item",{attrs:{label:"签收记录"}},[a("el-table",{attrs:{border:"",data:e.detailForm.reviewerTableData2,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man",label:"签收单位"}}),a("el-table-column",{staticStyle:{width:"30%"},attrs:{prop:"status",label:"签收状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.status))])]}}],null,!1,1127553567)}),a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man1",label:"签收人"}}),a("el-table-column",{staticStyle:{width:"70%"},attrs:{prop:"man2",label:"签收时间"}})],1)],1):e._e()],1),e.isDetail?e._e():a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:e.rejectedBtn}},[e._v("驳回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.previewBtn}},[e._v("审核")])],1),a("el-dialog",{attrs:{width:"40%",title:e.isAudit?"通过":"驳回",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"rejectedForm",attrs:{"label-position":"right","label-width":"100px",model:e.rejectedForm,rules:e.rejectedFormRules,size:e.tableSize}},[a("el-form-item",{attrs:{label:"公文号"}},[a("span",[e._v(e._s(e.detailForm.offNO))])]),a("el-form-item",{attrs:{label:"标题"}},[a("span",[e._v(e._s(e.detailForm.title))])]),a("el-form-item",{attrs:{label:"填写意见",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.rejectedForm.desc,callback:function(t){e.$set(e.rejectedForm,"desc",t)},expression:"rejectedForm.desc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:e.innerCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.innerSubmit("rejectedForm")}}},[e._v(e._s(e.isAudit?"通过":"驳回"))])],1)],1)],1)],1)},n=[],i=(a("99af"),a("4160"),a("a630"),a("a15b"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("5530")),s=a("2f62"),o=a("3e16"),l=a("51e5"),c=a("0a4f"),u=a("ed08"),p={name:"PostList",components:{Bar:function(){return a.e("chunk-2d0bac10").then(a.bind(null,"390d"))},BarCell:function(){return a.e("chunk-2d221e17").then(a.bind(null,"cbdf"))},BarSpace:function(){return a.e("chunk-2d2218de").then(a.bind(null,"cb9b"))},SearchPanel:function(){return a.e("chunk-c808d2de").then(a.bind(null,"978e"))},DateRangePicker:function(){return a.e("chunk-2d210a9a").then(a.bind(null,"b99f"))},TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))},TablePopover:function(){return a.e("chunk-5eee24a0").then(a.bind(null,"950f"))}},mixins:[l["a"]],computed:Object(i["a"])({},Object(s["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doLoad(),this.urlAnnex=Object(c["a"])().ResourcesURL,this.createUserId=Object(c["a"])().uid},methods:{doRefresh:function(e){var t=this;Object(o["g"])(e).then((function(e){t.tableData=e.data,t.pagination.total=e.dataCount}))},doLoad:function(){var e={pageIndex:this.pagination.currentPage,pageSize:this.pagination.pageSize};this.doRefresh(e)},doCreate:function(){this.$router.push({name:"CreatePostDetail"})},searchFormSubmit:function(){var e={};if(e.PageSize=this.pagination.pageSize,e.PageIndex=this.pagination.currentPage,this.searchForm.search_key&&(e.documentNoOrTitle=this.searchForm.search_key),this.searchForm.timer_type){if(e.dateType=this.searchForm.timer_type,!(this.searchForm.time.length>0))return this.$message({type:"error",message:"请选择日期范围!"}),!1;e.dateStart=this.searchForm.time[0],e.dateEnd=this.searchForm.time[1]}this.searchForm.audit_type&&(e.approvalStatus=this.searchForm.audit_type),this.searchForm.receive_type&&(e.signStatus=this.searchForm.receive_type),this.doRefresh(e)},searchFormReset:function(){this.searchForm={time:[],audit_type:"",receive_type:"",search_key:"",timer_type:""};var e={pageIndex:this.pagination.currentPage,pageSize:this.pagination.pageSize};this.doRefresh(e)},paginationCurrenChange:function(e){this.pagination.currentPage=e;var t={pageIndex:this.pagination.currentPage,pageSize:this.pagination.pageSize};this.doRefresh(t)},paginationSizeChange:function(e){this.pagination.pageSize=e;var t={pageIndex:this.pagination.currentPage,pageSize:this.pagination.pageSize};this.doRefresh(t)},batchDelete:function(e){var t=this;this.$confirm("确定要批量删除这"+e.length+"条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).then((function(){var e={pageIndex:t.pagination.currentPage,pageSize:t.pagination.pageSize};t.doRefresh(e),t.$message({type:"success",message:"删除成功!"})}))},handleEdit:function(e){this.$router.push({name:"EditPostDetail",params:{id:e.ID}})},handleShare:function(e){var t=this;this.$confirm("确认发送公文至签收单位？发送后将不可撤销！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).then((function(){var a={documentPublishID:e.ID};Object(o["c"])(a).then((function(e){t.$message({message:"恭喜您，发送公文成功",type:"success"});var a={pageIndex:t.pagination.currentPage,pageSize:t.pagination.pageSize};t.doRefresh(a)}))}))},closeShareForm:function(){this.shareFormVisible=!1},confirmShareForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.$message({message:"恭喜您，发送成功",type:"success"}),t.shareFormVisible=!1)}))},detailFormClose:function(){this.detailFormVisible=!1},handleDetails:function(e){this.appID=e.ID;var t={documentPublishID:e.ID};1===e.SignStatus&&4!==e.ApprovalStatus||2===e.SignStatus&&4!==e.ApprovalStatus||3===e.SignStatus&&4!==e.ApprovalStatus?this.isShowSign=!0:this.isShowSign=!1,0===e.ApprovalStatus?this.isShowApp=!1:this.isShowApp=!0,this.viewDetail(t),this.isDetail=!0,this.detailFormVisible=!0},handleReviewer:function(e){this.rejectedForm.desc="",this.appID=e.ID;var t={documentPublishID:e.ID};this.viewDetail(t),this.isDetail=!1,this.detailFormVisible=!0},viewDetail:function(e){var t=this;Object(o["f"])(e).then((function(e){t.detailForm.offNO=e.response.DocumentNo,t.detailForm.title=e.response.Title,t.detailForm.content=e.response.Content,e.response.AnnexInfo.length>0?t.detailForm.attachment=e.response.AnnexInfo:t.detailForm.attachment="-";for(var a=[],r=[],n=0;n<e.response.approvalRecords.length;n++)if(0===e.response.ApprovalType)if(""===e.response.approvalRecords[n].ApprovalUName||null==e.response.approvalRecords[n].ApprovalUName);else{var i={},s=e.response.approvalRecords[n].ApprovalUName,o=s.split("-")[0],l=s.split("-")[1];i.man=l?s:o,i.man1=Object(u["e"])(e.response.approvalRecords[n].ApprovalDate,"{y}-{m}-{d} {h}:{i}:{s}"),0===e.response.approvalRecords[n].ApprovalResult?i.status="待审批":1===e.response.approvalRecords[n].ApprovalResult?i.status="审批通过":2===e.response.approvalRecords[n].ApprovalResult&&(i.status="驳回"),i.man2=e.response.approvalRecords[n].ApprovalContent,a.push(i),r.push(i)}else if(1===e.response.ApprovalType)if(""===e.response.approvalRecords[n].ApprovalPersonName||null==e.response.approvalRecords[n].ApprovalPersonName);else{var c={},p=e.response.approvalRecords[n].ApprovalPersonName,m=p.split("-")[0],d=p.split("-")[1];c.man=d?p:m,c.man1=Object(u["e"])(e.response.approvalRecords[n].ApprovalDate,"{y}-{m}-{d} {h}:{i}:{s}"),0===e.response.approvalRecords[n].ApprovalResult?c.status="待审批":1===e.response.approvalRecords[n].ApprovalResult?c.status="审批通过":2===e.response.approvalRecords[n].ApprovalResult&&(c.status="驳回"),c.man2=e.response.approvalRecords[n].ApprovalContent,a.push(c),r.push(c)}r.length>0?t.detailForm.reviewerTableData=r:t.detailForm.reviewerTableData=[];for(var h=[],g=[],f=0;f<e.response.SignUnits.length;f++)if(0===e.response.SignUnits[f].MainRole||99===e.response.SignUnits[f].MainRole);else{""===e.response.SignUnits[f].SignUName||null==e.response.SignUnits[f].SignUName||h.push(e.response.SignUnits[f].SignUName);var b={},v={};e.response.SignUnits[f].InstitutionsName&&(b.man=e.response.SignUnits[f].InstitutionsName),0===e.response.SignUnitType?1===e.response.SignUnits[f].MainRole?b.man="全部部局":2===e.response.SignUnits[f].MainRole?b.man="全部指导中心":3===e.response.SignUnits[f].MainRole?b.man="全部总队":4===e.response.SignUnits[f].MainRole?b.man="全部鉴定点":5===e.response.SignUnits[f].MainRole&&(b.man="全部鉴定站"):b.man=e.response.SignUnits[f].InstitutionsName,v.man=e.response.SignUnits[f].InstitutionsName,b.man1=e.response.SignUnits[f].SignUName,v.man1=e.response.SignUnits[f].SignUName,b.man2=Object(u["e"])(e.response.SignUnits[f].SignDate,"{y}-{m}-{d} {h}:{i}:{s}"),v.man2=Object(u["e"])(e.response.SignUnits[f].SignDate,"{y}-{m}-{d} {h}:{i}:{s}"),0===e.response.SignUnits[f].SignResult?(b.status="待签收",v.status="待签收"):1===e.response.SignUnits[f].SignResult&&(b.status="已签收",v.status="已签收"),h.push(b),g.push(v)}if(g.length>0?t.detailForm.reviewerTableData2=g:t.detailForm.reviewerTableData2=[],h.length>0){for(var S=[],y=0;y<h.length;y++)S.push(h[y].man);for(var F=Array.from(new Set(S)),D=[],w=0;w<F.length;w++)F[w]&&D.push(F[w]);D.length>0?t.detailForm.receiptMan=D.join(","):t.detailForm.receiptMan="-"}else t.detailForm.receiptMan="-";if(a.length>0){for(var _=[],A=0;A<a.length;A++)_.push(a[A].man);t.detailForm.reviewerMan=_.join(",")}else t.detailForm.reviewerMan="-"}))},rejectedBtn:function(){this.isAudit=!1,this.innerVisible=!0,this.rejectedForm.desc=""},previewBtn:function(){this.isAudit=!0,this.innerVisible=!0,this.rejectedForm.desc=""},innerCancel:function(){this.innerVisible=!1},innerSubmit:function(e){var t=this;this.isAudit?this.$refs[e].validate((function(e){if(e){var a={documentPublishID:t.appID,approvalContent:t.rejectedForm.desc,isAgree:!0};Object(o["b"])(a).then((function(e){t.$message({message:"审核通过",type:"success"}),t.innerVisible=!1,t.detailFormVisible=!1;var a={pageIndex:t.pagination.currentPage,pageSize:t.pagination.pageSize};t.doRefresh(a)}))}else console.log("error submit!!"),t.$message({message:"审核失败",type:"fail"})})):this.$refs[e].validate((function(e){if(e){var a={documentPublishID:t.appID,approvalContent:t.rejectedForm.desc,isAgree:!1};Object(o["b"])(a).then((function(e){t.$message({message:"已驳回",type:"success"}),t.innerVisible=!1,t.detailFormVisible=!1;var a={pageIndex:t.pagination.currentPage,pageSize:t.pagination.pageSize};t.doRefresh(a)}))}else console.log("error submit!!")}))},handleDelete:function(e){var t=this;this.$confirm("确认删除该公文？删除后将不可恢复！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).then((function(){var e={pageIndex:t.pagination.currentPage,pageSize:t.pagination.pageSize};t.doRefresh(e),t.$message({type:"success",message:"删除成功!"})}))},getOptions:function(e){this.formProfessionOptions=e;var t=[];e.forEach((function(e){var a=e.ID,r=e.Name;e.SubLst&&e.SubLst.length&&e.SubLst.forEach((function(e){var n=e.ID,i=e.Name;e.SubLst&&e.SubLst.length&&e.SubLst.forEach((function(e){t.push({ProfessionID:a,SkillID:n,DirectionID:e.ID,ProfessionName:"".concat(r,"-").concat(i,"-").concat(e.Name)})}))}))})),this.defaultEITypeList=t}}},m=p,d=(a("1311"),a("2877")),h=Object(d["a"])(m,r,n,!1,null,null,null);t["default"]=h.exports},"8db0":function(e,t,a){}}]);