(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f38b47aa"],{5785:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}},[a("div",{staticClass:"title"},[e._v("处罚设置")]),a("el-form",{ref:"form",refInFor:!0,attrs:{model:e.form,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"纳入诚信考试"}},[a("el-switch",{model:{value:e.form.include,callback:function(t){e.$set(e.form,"include",t)},expression:"form.include"}})],1),a("el-form",{ref:"form2",refInFor:!0,staticClass:"demo-form-inline",attrs:{model:e.form2,inline:!0}},[a("el-form-item",{attrs:{label:"禁止考试","label-width":"180px"}},[a("el-switch",{model:{value:e.form2.banExam,callback:function(t){e.$set(e.form2,"banExam",t)},expression:"form2.banExam"}})],1),a("el-form-item",[e.form2.banExam?a("el-radio-group",{model:{value:e.form2.durationType,callback:function(t){e.$set(e.form2,"durationType",t)},expression:"form2.durationType"}},[a("el-radio",{attrs:{label:0}},[e._v("永久")]),a("el-radio",{attrs:{label:1}},[e._v("限时")])],1):e._e()],1),e.form2.banExam&&e.form2.durationType?a("el-form-item",[a("el-input",{model:{value:e.form2.duration,callback:function(t){e.$set(e.form2,"duration",t)},expression:"form2.duration"}},[a("el-select",{attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:e.form2.timeType,callback:function(t){e.$set(e.form2,"timeType",t)},expression:"form2.timeType"}},e._l(e.dateOptions,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1):e._e()],1),a("el-form",{ref:"form3",refInFor:!0,staticClass:"demo-form-inline",attrs:{model:e.form3,inline:!0}},[a("el-form-item",{attrs:{label:"当次该科目考试成绩无效"}},[a("el-switch",{on:{change:e.handleCancelThisGrades},model:{value:e.form3.cancelThisGrades,callback:function(t){e.$set(e.form3,"cancelThisGrades",t)},expression:"form3.cancelThisGrades"}})],1),a("el-form-item",{attrs:{label:"当次全部科目考试成绩无效"}},[a("el-switch",{on:{change:e.handleCancelAllGrades},model:{value:e.form3.cancelAllGrades,callback:function(t){e.$set(e.form3,"cancelAllGrades",t)},expression:"form3.cancelAllGrades"}})],1)],1)],1),a("div",{staticClass:"title",staticStyle:{"margin-top":"50px"}},[e._v("违规违纪行为")]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加违规违纪行为")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"违纪内容",width:"800"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Content))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!0)})],1),a("div",{directives:[{name:"permission",rawName:"v-permission",value:"save",expression:"'save'"}],staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveSetting}},[e._v("保存设置")])],1)],1)})),1),a("el-dialog",{attrs:{title:"新增违规违纪行为",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":"80px",rules:e.dialogFormRules}},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogForm.content,callback:function(t){e.$set(e.dialogForm,"content",t)},expression:"dialogForm.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseDialogForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmDialogForm}},[e._v("确 定")])],1)],1)],1)},r=[],i=(a("a434"),a("b0c0"),a("d3b7"),a("96cf"),a("1da1")),o=a("5530"),l=a("2f62"),s=a("f37d"),c={name:"ExamViolation",data:function(){return{settingsType:0,tabs:[{label:"普通违纪",name:"0"},{label:"严重违纪",name:"1"},{label:"特别严重违纪",name:"2"}],activeName:"0",form:{include:!0},form2:{banExam:!0,durationType:0,duration:"",timeType:0},form3:{cancelThisGrades:!1,cancelAllGrades:!1},dialogForm:{content:""},tableData:[],dialogFormVisible:!1,dialogFormRules:{content:[{required:!0,message:"请输入内容",trigger:"blur"}]},dateOptions:[{value:0,label:"天"},{value:1,label:"月"},{value:2,label:"日"}]}},computed:Object(o["a"])({},Object(l["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){var e=this;function t(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.reqForGetViolationDiscipline();case 2:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}t()},methods:{reqForGetViolationDiscipline:function(){var e=this;return new Promise((function(t,a){Object(s["e"])({SettingsType:e.settingsType}).then((function(a){var n=a.response,r=n.SincerityManage,i=n.NoExamination,o=n.Duration,l=n.DurationNum,s=n.DateType,c=n.CancelThisGrades,u=n.CancelAllGrades,d=n.details;e.form={include:r},e.form2={banExam:i,durationType:o?1:0,timeType:s,duration:l},e.form3={cancelThisGrades:c,cancelAllGrades:u},e.tableData=d,t()}))}))},reqForUpdateViolationDiscipline:function(){var e=this,t=this.form.include,a=this.form2,n=a.banExam,r=a.durationType,i=a.duration,o=a.timeType,l=this.form3,c=l.cancelThisGrades,u=l.cancelAllGrades;return new Promise((function(a,l){Object(s["h"])({SettingsType:e.settingsType,sincerityManage:t,noExamination:n,duration:r,durationNum:i,dateType:o,cancelThisGrades:c,cancelAllGrades:u,details:e.tableData}).then((function(){e.$notify({title:"成功",message:"更新成功",type:"success"}),a()}))}))},handleClickTab:function(e){var t=this,a=e.name;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reqForGetViolationDiscipline();case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}"0"===a?this.settingsType=0:"1"===a?this.settingsType=1:"2"===a&&(this.settingsType=2),n()},handleDelete:function(e,t){this.tableData.splice(e,1)},handleAdd:function(){this.dialogFormVisible=!0},handleCloseDialogForm:function(){this.dialogFormVisible=!1},handleConfirmDialogForm:function(){var e=this;this.$refs.dialogForm.validate((function(t){t?(e.tableData.unshift({Content:e.dialogForm.content}),e.dialogForm.content="",e.dialogFormVisible=!1):e.$message({message:"提交失败",type:"error"})}))},handleSaveSetting:function(){var e=this;function t(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.reqForUpdateViolationDiscipline();case 2:return t.next=4,e.reqForGetViolationDiscipline();case 4:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}t()},handleCancelThisGrades:function(e){e&&(this.form3.cancelAllGrades=!1)},handleCancelAllGrades:function(e){e&&(this.form3.cancelThisGrades=!1)}}},u=c,d=(a("d08b"),a("2877")),m=Object(d["a"])(u,n,r,!1,null,"dd2a861c",null);t["default"]=m.exports},"9b96":function(e,t,a){},d08b:function(e,t,a){"use strict";var n=a("9b96"),r=a.n(n);r.a},f37d:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"h",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return d}));var n=a("b775");function r(e){return Object(n["a"])({url:"api/BadRecord/GetViolationDiscipline",method:"get",params:e})}function i(e){return Object(n["a"])({url:"api/BadRecord/UpdateViolationDiscipline",method:"post",data:e})}function o(e){return Object(n["a"])({url:"api/BadRecord/GetFalseDeclaration",method:"get",params:e})}function l(e){return Object(n["a"])({url:"api/BadRecord/UpdateFalseDeclaration",method:"post",data:e})}function s(e){return Object(n["a"])({url:"api/BadRecord/GetExamAbsent",method:"get",params:e})}function c(e){return Object(n["a"])({url:"api/BadRecord/UpdateExamAbsent",method:"post",data:e})}function u(e){return Object(n["a"])({url:"api/BadRecord/GetPunishRecordList",method:"get",params:e})}function d(e){return Object(n["a"])({url:"api/BadRecord/GetMissRecordList",method:"get",params:e})}}}]);