(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a7223a"],{"36e9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[a("bar",{attrs:{slot:"title"},slot:"title"},[a("bar-space"),a("bar-cell",[a("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:e.doRefresh}},[e._v("刷新")])],1),a("bar-cell",{directives:[{name:"permission",rawName:"v-permission",value:"export",expression:"'export'"}]},[a("el-button",{attrs:{icon:"el-icon-download",size:e.tableSize},on:{click:e.doExport}},[e._v("导出")])],1)],1),a("el-form",{ref:"searchForm",attrs:{inline:"","label-position":"top",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("profession-skill-select",{attrs:{label:"职业工种/等级/方向","first-level":e.searchForm.WorkCID,"second-level":e.searchForm.GradeCID},on:{selectChange:e.selectChange}}),a("el-form-item",{attrs:{label:"缴费状态"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.PayStatus,callback:function(t){e.$set(e.searchForm,"PayStatus",t)},expression:"searchForm.PayStatus"}},[a("el-option",{attrs:{label:"未缴费",value:0}}),a("el-option",{attrs:{label:"已缴费",value:1}}),a("el-option",{attrs:{label:"已取消",value:2}})],1)],1),a("el-form-item",{attrs:{label:"缴费方式"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.PayWay,callback:function(t){e.$set(e.searchForm,"PayWay",t)},expression:"searchForm.PayWay"}},[a("el-option",{attrs:{label:"待确认",value:0}}),a("el-option",{attrs:{label:"在线支付",value:1}}),a("el-option",{attrs:{label:"手动确认",value:2}})],1)],1),a("el-form-item",{attrs:{label:"缴费科目"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.PayStatus,callback:function(t){e.$set(e.searchForm,"PayStatus",t)},expression:"searchForm.PayStatus"}},[a("el-option",{attrs:{label:"理论",value:1}}),a("el-option",{attrs:{label:"技能",value:2}})],1)],1),a("el-form-item",{attrs:{label:"时间类型"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.DateType,callback:function(t){e.$set(e.searchForm,"DateType",t)},expression:"searchForm.DateType"}},[a("el-option",{attrs:{label:"报名时间",value:0}}),a("el-option",{attrs:{label:"缴费时间",value:1}})],1)],1),a("el-form-item",{attrs:{label:"时间范围"}},[a("date-range-picker",{model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),a("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"姓名/证件号码",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.searchFormReset("searchForm")}}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,"selection-row":e.selectionRow,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"text-red"},[e._v("合计：")]),a("span",[e._v("已缴费数据：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.PayPeopleTotal))]),a("span",[e._v("条，未缴费数据：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.NoPayPeopleTotal))]),a("span",[e._v("条，在线缴费金额：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.OnlinePayMoney))]),a("span",[e._v("元，（网银：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.EBankPayMoney))]),a("span",[e._v("，微信：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.WechatPayMoney))]),a("span",[e._v("，支付宝：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.AliPayMoney))]),a("span",[e._v("），手动确认缴费金额")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.amount.ManualPayMoney))]),a("span",[e._v("元")])]),a("el-table-column",{attrs:{slot:"EnrollDate",label:"报名时间",align:"center"},slot:"EnrollDate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("parseTime")(n.EnrollDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{slot:"PlanType",label:"缴费科目",align:"center"},slot:"PlanType",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.PlanType?a("span",[e._v("理论")]):e._e(),2===n.PlanType?a("span",[e._v("技能")]):e._e()]}}])}),a("el-table-column",{attrs:{slot:"PayWay",label:"缴费方式",align:"center"},slot:"PayWay",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.PayWay?a("span",[e._v("待确认")]):e._e(),1===n.PayWay?a("span",[e._v("在线支付")]):e._e(),2===n.PayWay?a("span",[e._v("手动确认")]):e._e()]}}])}),a("el-table-column",{attrs:{slot:"PayStatus",label:"缴费状态",align:"center"},slot:"PayStatus",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.PayStatus?a("span",[e._v("未缴费")]):e._e(),1===n.PayStatus?a("span",[e._v("已缴费")]):e._e(),2===n.PayStatus?a("span",[e._v("已取消")]):e._e()]}}])}),a("el-table-column",{attrs:{slot:"PayType",label:"缴费类型",align:"center"},slot:"PayType",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.PayType?a("span",[e._v("微信")]):e._e(),2===n.PayType?a("span",[e._v("支付宝")]):e._e(),3===n.PayType?a("span",[e._v("网银")]):e._e()]}}])}),a("el-table-column",{attrs:{slot:"PayDate",label:"缴费时间",align:"center"},slot:"PayDate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("parseTime")(n.PayDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),a("el-table-column",{attrs:{slot:"Operate",label:"操作",width:"150",align:"center",fixed:"right"},slot:"Operate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.payStatus?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"detail",expression:"'detail'"}],on:{click:function(t){return e.handleCheckDtl(n)}}},[e._v("详情")]):a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"pay",expression:"'pay'"}],on:{click:function(t){return e.handleOpenConfirmPay(n)}}},[e._v("确认缴费")])]}}])}),a("template",{directives:[{name:"permission",rawName:"v-permission",value:"pay",expression:"'pay'"}],slot:"paginationButtons"},[a("el-button",{attrs:{icon:"el-icon-s-check",size:e.tableSize,plain:""},on:{click:e.batchOpenConfirmPay}},[e._v("批量确认缴费")])],1)],2),a("el-dialog",{attrs:{title:"确认缴费",visible:e.confirmPayDialogVisible},on:{"update:visible":function(t){e.confirmPayDialogVisible=t}}},[a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.confirmPayColumns,"table-data":e.confirmPayTableData,options:e.tableOptions}},[a("el-table-column",{attrs:{slot:"PlanType",label:"缴费科目",align:"center"},slot:"PlanType",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.PlanType?a("span",[e._v("理论")]):e._e(),2===n.PlanType?a("span",[e._v("技能")]):e._e()]}}])})],1),a("div",{staticStyle:{display:"flex","flex-direction":"row","margin-bottom":"50px"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","margin-right":"50px"}},[a("span",[e._v("缴费金额：")]),a("span",{staticClass:"text-red"},[e._v(e._s(e.confirmPayTotalMoney))]),a("span",[e._v("元")])]),a("div",{staticStyle:{display:"flex","flex-direction":"row","margin-right":"50px"}},[a("span",[e._v("缴费人数：")]),a("span",[e._v(e._s(e.confirmPayTableData.length))]),a("span",[e._v("人")])])]),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmPay}},[e._v("确认缴费")]),a("el-button",{attrs:{plain:""},on:{click:e.handleCancelConfirmPay}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"确认缴费",visible:e.dtlDialogVisible},on:{"update:visible":function(t){e.dtlDialogVisible=t}}},[a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.dtlColumns,"table-data":e.dtlTableData,options:e.tableOptions}},[a("el-table-column",{attrs:{slot:"PlanType",label:"缴费科目",align:"center"},slot:"PlanType",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.PlanType?a("span",[e._v("理论")]):e._e(),2===n.PlanType?a("span",[e._v("技能")]):e._e()]}}])})],1),e.dtlTableData.length?a("el-row",[a("el-col",{attrs:{span:12}},[e._v("缴费状态：已缴费")]),a("el-col",{attrs:{span:12}},[e._v("缴费时间："+e._s(e.dtlTableData[0].PayDate))]),1===e.dtlTableData[0].PayWay&&1===e.dtlTableData[0].PayType?a("el-col",{attrs:{span:12}},[e._v("缴费类型：微信")]):e._e(),1===e.dtlTableData[0].PayWay&&2===e.dtlTableData[0].PayType?a("el-col",{attrs:{span:12}},[e._v("缴费类型：支付宝")]):e._e(),1===e.dtlTableData[0].PayWay&&3===e.dtlTableData[0].PayType?a("el-col",{attrs:{span:12}},[e._v("缴费类型：网银")]):e._e(),1===e.dtlTableData[0].PayWay?a("el-col",{attrs:{span:12}},[e._v("交易单号："+e._s(e.dtlTableData[0].TransactionNum))]):e._e(),0===e.dtlTableData[0].PayWay?a("el-col",{attrs:{span:12}},[e._v("缴费方式：待确认")]):e._e(),1===e.dtlTableData[0].PayWay?a("el-col",{attrs:{span:12}},[e._v("缴费方式：在线支付")]):e._e(),2===e.dtlTableData[0].PayWay?a("el-col",{attrs:{span:12}},[e._v("缴费方式：手动确认")]):e._e(),a("el-col",{attrs:{span:12}},[e._v("确认人："+e._s(e.dtlTableData[0].ConfirmAdminName))])],1):e._e()],1)],1)},r=[],l=(a("4160"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),o=a("5530"),i=a("2f62"),s=a("3e0f"),c={name:"PayConfirm",components:{Bar:function(){return a.e("chunk-2d0bac10").then(a.bind(null,"390d"))},BarCell:function(){return a.e("chunk-2d221e17").then(a.bind(null,"cbdf"))},BarSpace:function(){return a.e("chunk-2d2218de").then(a.bind(null,"cb9b"))},DateRangePicker:function(){return a.e("chunk-2d210a9a").then(a.bind(null,"b99f"))},SearchPanel:function(){return a.e("chunk-c808d2de").then(a.bind(null,"978e"))},TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))},ProfessionSkillSelect:function(){return a.e("chunk-74e90192").then(a.bind(null,"7c1d"))}},data:function(){return{searchPanelActive:!0,searchForm:{WorkCID:null,GradeCID:null,PayWay:"",PayStatus:"",PlanType:"",DateType:1,time:[],search_key:""},tableLoading:!1,columns:[{title:"姓名",key:"Name",align:"center","min-width":"100px"},{title:"证件号码",key:"IDCardNum",align:"center","min-width":"150px"},{title:"鉴定工种",key:"WorkName",align:"center","min-width":"150px"},{title:"鉴定等级",key:"GradeName",align:"center","min-width":"150px"},{title:"报名时间",key:"EnrollDate",slot:"EnrollDate"},{title:"缴费科目",key:"PlanType",slot:"PlanType"},{title:"缴费方式",key:"PayWay",slot:"PayWay"},{title:"缴费状态",key:"PayStatus",slot:"PayStatus"},{title:"缴费金额",key:"PayMoney",align:"center","min-width":"100px"},{title:"缴费类型",key:"PayType",slot:"PayType"},{title:"缴费时间",key:"PayDate",slot:"PayDate"},{title:"确认人",key:"ConfirmAdminName",align:"center","min-width":"100px"},{title:"操作",key:"Operate",slot:"Operate"}],tableData:[],indexRow:{title:"序号",align:"center"},selectionRow:{align:"center"},tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0},confirmPayDialogVisible:!1,confirmPayTableData:[],confirmPayColumns:[{title:"姓名",key:"Name",align:"center","min-width":"100px"},{title:"证件号码",key:"Name",align:"center","min-width":"150px"},{title:"鉴定工种",key:"WorkName",align:"center","min-width":"150px"},{title:"鉴定等级",key:"GradeName",align:"center","min-width":"150px"},{title:"缴费科目",key:"PlanType",slot:"PlanType"},{title:"缴费金额",key:"PayMoney",align:"center","min-width":"100px"}],confirmPayTotalMoney:"0.00",amount:{PayPeopleTotal:0,NoPayPeopleTotal:0,ManualPayMoney:0,OnlinePayMoney:0,WechatPayMoney:0,AliPayMoney:0,EBankPayMoney:0},dtlDialogVisible:!1,dtlTableData:[],dtlColumns:[{title:"姓名",key:"Name",align:"center","min-width":"100px"},{title:"证件号码",key:"Name",align:"center","min-width":"150px"},{title:"鉴定工种",key:"WorkName",align:"center","min-width":"150px"},{title:"鉴定等级",key:"GradeName",align:"center","min-width":"150px"},{title:"缴费科目",key:"PlanType",slot:"PlanType"},{title:"缴费金额",key:"PayMoney",align:"center","min-width":"100px"}]}},computed:Object(o["a"])({},Object(i["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doRefresh()},methods:{selectChange:function(e){this.searchForm=Object(o["a"])(Object(o["a"])({},this.searchForm),{},{WorkCID:e.firstLevel,GradeCID:e.secondLevel})},reqForGetEnrollPayRecordPageList:function(){var e=this,t=this.searchForm,a=t.WorkCID,n=t.GradeCID,r=t.PayWay,l=t.PayStatus,o=t.PlanType,i=t.DateType,c=t.time,u=t.search_key,p=this.pagination,y=p.currentPage,d=p.pageSize;return new Promise((function(t,p){Object(s["g"])({workCID:a||0,gradeCID:n||0,payStatus:l,payWay:r,planType:o,dateStart:c.length?c[0]:"",dateEnd:c.length?c[1]:"",dateType:i,nameOrCardNo:u,pageIndex:y,pageSize:d}).then((function(a){e.tableData=a.data,e.pagination.total=a.dataCount,t()}))}))},reqForGetEnrollPayRecordStats:function(){var e=this,t=this.searchForm,a=t.WorkCID,n=t.GradeCID,r=t.PayWay,l=t.PayStatus,o=t.PlanType,i=t.time,c=t.search_key;return new Promise((function(t,u){Object(s["h"])({workCID:a||0,gradeCID:n||0,payStatus:l,payWay:r,planType:o,enrollDateStart:i.length?i[0]:"",enrollDateEnd:i.length?i[1]:"",nameOrCardNo:c}).then((function(a){e.amount=a.response,t()}))}))},reqForGetEnrollPayRecordList:function(e){var t=this;return new Promise((function(a,n){Object(s["f"])({payRecordIDs:e}).then((function(e){t.confirmPayTableData=e.response;var n=0;e.response.forEach((function(e){n+=Number(e.PayMoney)})),n=n.toFixed(2),t.confirmPayTotalMoney=n,a()}))}))},reqForConfirmPay:function(e){var t=this;return new Promise((function(a,n){Object(s["b"])(e).then((function(){t.confirmPayDialogVisible=!1,t.confirmPayTableData=[],t.confirmPayTotalMoney="0.00",t.$notify({title:"成功",message:"缴费成功",type:"success"}),a()}))}))},reqForGetEnrollPayRecordDetail:function(e){var t=this;return new Promise((function(a,n){Object(s["e"])({payRecordID:e}).then((function(e){t.dtlTableData.push(e.response),a()}))}))},doRefresh:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.reqForGetEnrollPayRecordPageList();case 2:return t.next=4,e.reqForGetEnrollPayRecordStats();case 4:case"end":return t.stop()}}),t)})))()},searchFormSubmit:function(){this.pagination.currentPage=1,this.doRefresh()},searchFormReset:function(){this.searchForm={WorkCID:null,GradeCID:null,PayWay:"",PayStatus:"",DateType:1,time:[],search_key:""},this.doRefresh()},handleCheckDtl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.PayRecordID,a.next=3,t.reqForGetEnrollPayRecordDetail(n);case 3:t.dtlDialogVisible=!0;case 4:case"end":return a.stop()}}),a)})))()},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()},handleCancelConfirmPay:function(){this.confirmPayDialogVisible=!1,this.confirmPayTableData=[],this.confirmPayTotalMoney="0.00"},handleConfirmPay:function(){var e=this,t=[];function a(){return n.apply(this,arguments)}function n(){return n=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.reqForConfirmPay();case 2:e.doRefresh();case 3:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}this.confirmPayTableData.forEach((function(e){t.push({payRecordID:e.PayRecordID,payMoney:e.PayMoney})})),a()},handleOpenConfirmPay:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.reqForGetEnrollPayRecordList({payRecordIDs:e.PayRecordID});case 2:t.confirmPayDialogVisible=!0;case 3:case"end":return a.stop()}}),a)})))()},batchOpenConfirmPay:function(){},doExport:function(){}}},u=c,p=a("2877"),y=Object(p["a"])(u,n,r,!1,null,null,null);t["default"]=y.exports},"3e0f":function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"h",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"j",(function(){return p})),a.d(t,"k",(function(){return y})),a.d(t,"i",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return h}));var n=a("b775");function r(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordPageList",method:"get",params:e})}function l(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordList",method:"get",params:e})}function o(e){return Object(n["a"])({url:"api/FeeManagement/ConfirmPay",method:"post",data:e})}function i(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordStats",method:"get",params:e})}function s(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordDetail",method:"get",params:e})}function c(e){return Object(n["a"])({url:"api/FeeManagement/GetChargingRulesList",method:"get",params:e})}function u(e){return Object(n["a"])({url:"api/FeeManagement/UpdateChargingRulesSetting",method:"post",data:e})}function p(e){return Object(n["a"])({url:"api/FeeManagement/GetPayRecordReportResponsePageList",method:"get",params:e})}function y(e){return Object(n["a"])({url:"api/FeeManagement/GetPayRecordReportStats",method:"get",params:e})}function d(e){return Object(n["a"])({url:"api/FeeManagement/GetInvoiceRecordPageList",method:"get",params:e})}function m(e){return Object(n["a"])({url:"api/FeeManagement/GetBatchPayLogView",method:"get",params:e})}function h(e){return Object(n["a"])({url:"api/FeeManagement/ConfirmBatchInvoice",method:"post",useJSON:!0,data:e})}}}]);