(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2b05bd"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},"3e16":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"s",(function(){return o})),a.d(t,"r",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"j",(function(){return l})),a.d(t,"m",(function(){return u})),a.d(t,"l",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"g",(function(){return p})),a.d(t,"f",(function(){return h})),a.d(t,"k",(function(){return f})),a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"i",(function(){return D})),a.d(t,"q",(function(){return F})),a.d(t,"p",(function(){return P})),a.d(t,"t",(function(){return w})),a.d(t,"o",(function(){return y})),a.d(t,"u",(function(){return k}));var n=a("b775");function i(e){return Object(n["a"])({url:"/api/Document/GetProfessionnalTitleViewList",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/api/Document/getPersonProfessionnalTitle",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/api/Document/getInstitutions",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/api/Document/DeleteDocumentApprovalProcess",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/api/Document/GetDocumentApprovalProcess",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/api/Document/UpdateDocumentApprovalProcess",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/api/Document/GetDocumentApprovalProcessList",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/api/Document/addDocumentApprovalProcess",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/api/Document/AddDocumentPublish",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/api/Document/GetDocumentPublishViewPageList",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/api/Document/GetDocumentPublish",method:"get",params:e})}function f(e){return Object(n["a"])({url:"/api/Document/UpdateDocumentPublish",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/api/Document/ApproveDocumentPublish",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/api/Document/ConfirmDocumentPublish",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/api/Document/getBookSiteInfoPageList",method:"get",params:e})}function D(e){return Object(n["a"])({url:"/api/Global/GetRegionList",method:"get",params:e})}function F(e){return Object(n["a"])({url:"/api/Document/GetDocumentReceiveViewPageList",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/api/Document/GetDocumentReceiveReadingViewPageList",method:"get",params:e})}function w(e){return Object(n["a"])({url:"/api/Document/Proposed",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/api/Document/GetDocumentReceive",method:"get",params:e})}function k(e){return Object(n["a"])({url:"/api/Document/Reading",method:"post",data:e})}},"7da0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-wrapper"},[a("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"省份",prop:"department"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.department,callback:function(t){e.$set(e.searchForm,"department",t)},expression:"searchForm.department"}},e._l(e.regionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.ReginName,value:e.ReginNum}})})),1)],1),a("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入鉴定站点名称",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.searchFormReset("searchForm")}}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,pagination:e.pagination},on:{"multi-select-delete":e.batchDelete,"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange},scopedSlots:e._u([{key:"paginationButtons",fn:function(){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-document",plain:"",loading:e.downloadLoading,size:e.tableSize},on:{click:e.handleDownload}},[e._v("批量导出Excel")])]},proxy:!0}])}),a("el-dialog",{attrs:{title:e.isEdit?"人员关联编辑":"人员关联管理",visible:e.associatedFormVisible,"destroy-on-close":"","before-close":e.associatedFormClose}},[a("el-form",{ref:"associatedForm",attrs:{"label-position":"right","label-width":"120px",model:e.associatedForm,rules:e.associatedFormRules,size:e.tableSize}},[a("el-form-item",{attrs:{label:"关联人",prop:"name"}},[e.isEdit?a("span",[e._v(e._s(e.associatedForm.name[0]))]):a("el-select",{staticClass:"width-full",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.associatedForm.name,callback:function(t){e.$set(e.associatedForm,"name",t)},expression:"associatedForm.name"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"关联职位",prop:"position"}},[a("el-cascader",{staticClass:"width-full",attrs:{placeholder:"输入关键字进行过滤",filterable:"",options:e.treeData,props:{checkStrictly:!0}},model:{value:e.associatedForm.position,callback:function(t){e.$set(e.associatedForm,"position",t)},expression:"associatedForm.position"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.associatedFormConfirm("associatedForm")}}},[e._v("确定")])],1)],1)],1)},i=[],o=(a("4160"),a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("5530")),r=a("1146"),s=a.n(r),c=a("2f62"),l=a("3e16"),u={data:function(){return{downloadLoading:!1,searchForm:{department:"",position:"",search_key:""},tableLoading:!1,regionList:[],columns:[{title:"省份",key:"ProvinceName",align:"center","min-width":"120px"},{title:"层级",key:"SiteType",align:"center","min-width":"120px",formatter:function(e,t,a,n){var i="-";switch(e.SiteType){case 0:i="鉴定站";break;case 1:i="鉴定点";break}return i}},{title:"单位名称",key:"SiteName",align:"center","min-width":"120px"},{title:"联系电话",key:"ContactNumber",align:"center","min-width":"120px"},{title:"电子邮箱",key:"ContactEmail",align:"center","min-width":"150px",formatter:function(e,t,a,n){var i="-";return e.ContactEmail&&(i=e.ContactEmail),i}}],indexRow:{title:"序号",align:"center",width:60},tableData:[],selectionRow:{align:"center"},tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:20},isEdit:!1,associatedFormVisible:!1,associatedForm:{name:[],position:[]},associatedFormRules:{name:[{required:!0,message:"请选择关联人",trigger:"change"}],position:[{required:!0,message:"请选择职位",trigger:"blur"}]},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],treeData:[{value:1,label:"【鉴定点】",children:[{value:4,label:"站长",children:[{value:9,label:"站长A"}]},{value:41,label:"副站长",children:[{value:411,label:"副站长A"},{value:413,label:"副站长B"}]}]},{value:2,label:"一级 2",children:[{value:5,label:"二级 2-1"},{value:6,label:"二级 2-2"}]},{value:3,label:"一级 3",children:[{value:7,label:"二级 3-1"},{value:8,label:"二级 3-2"}]}]}}},d={name:"ContactList",components:{TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))}},mixins:[u],computed:Object(o["a"])({},Object(c["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doLoad()},methods:{doRefresh:function(e){var t=this;Object(l["n"])(e).then((function(e){t.tableData=e.data,t.pagination.total=e.dataCount})),Object(l["i"])().then((function(e){t.regionList=e.response}))},doLoad:function(){var e={PageSize:this.pagination.pageSize,PageIndex:this.pagination.currentPage};this.doRefresh(e)},doAssociated:function(){this.isEdit=!1,this.associatedFormVisible=!0},searchFormSubmit:function(){var e={};e.PageSize=this.pagination.pageSize,e.PageIndex=this.pagination.currentPage,this.searchForm.department&&(e.ProvinceID=this.searchForm.department),this.searchForm.search_key&&(e.name=this.searchForm.search_key),this.doRefresh(e)},searchFormReset:function(){this.searchForm={department:"",position:"",search_key:""};var e={PageSize:this.pagination.pageSize,PageIndex:this.pagination.currentPage};this.doRefresh(e)},handleUpload:function(e){var t=e.size/1024/1024<2;if(!t)return this.$message.error("文件大小不能超过2MB!"),!1;this.readerData(e)},readerData:function(e){var t=this;return new Promise((function(a,n){var i=new FileReader;i.onload=function(e){var n=e.target.result,i=s.a.read(n,{type:"array"}),o=i.SheetNames[0],r=i.Sheets[o],c=t.getHeaderRow(r),l=s.a.utils.sheet_to_json(r);t.generateData({header:c,results:l}),a()},i.readAsArrayBuffer(e)}))},getHeaderRow:function(e){var t,a=[],n=s.a.utils.decode_range(e["!ref"]),i=n.s.r;for(t=n.s.c;t<=n.e.c;++t){var o=e[s.a.utils.encode_cell({c:t,r:i})],r="UNKNOWN "+t;o&&o.t&&(r=s.a.utils.format_cell(o)),a.push(r)}return a},generateData:function(e){var t=e.header,a=e.results,n=[];t.forEach((function(e){n.push({title:e,key:e})})),this.columns=n,this.tableData=a},handleDownload:function(){var e=this;this.downloadLoading=!0;var t=this.columns.map((function(e){return e.title})),n=this.columns.map((function(e){return e.key})),i=this.tableData.map((function(e){return n.map((function(t){return e[t]}))}));a.e("chunk-0e610f46").then(a.bind(null,"4bf8")).then((function(a){a.export_json_to_excel({header:t,data:i,filename:"",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1}))},batchDelete:function(e){var t=this;this.$confirm("确定要批量删除这"+e.length+"条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).then((function(){var e={PageSize:t.pagination.pageSize,PageIndex:t.pagination.currentPage};t.doRefresh(e),t.$message({type:"success",message:"删除成功!"})}))},paginationCurrenChange:function(e){this.pagination.currentPage=e;var t={PageSize:this.pagination.pageSize,PageIndex:this.pagination.currentPage};this.doRefresh(t)},paginationSizeChange:function(e){this.pagination.pageSize=e;var t={PageSize:this.pagination.pageSize,PageIndex:this.pagination.currentPage};this.doRefresh(t)},handleEdit:function(e){e.index;var t=e.row;this.isEdit=!0,this.associatedFormVisible=!0,this.associatedForm={name:[t.name]}},handleDelete:function(e){e.index,e.row},associatedFormClose:function(){this.associatedFormVisible=!1},associatedFormConfirm:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.$message({message:"恭喜您，提交成功",type:"success"}),t.associatedFormClose()):console.log("error submit!!")}))}}},m=d,p=a("2877"),h=Object(p["a"])(m,n,i,!1,null,null,null);t["default"]=h.exports}}]);