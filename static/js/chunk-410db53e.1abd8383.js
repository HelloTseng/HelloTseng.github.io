(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-410db53e"],{2934:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"j",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return g}));var r=n("b775");function a(e){return Object(r["a"])({url:"api/Sys/CheckUserInfo",method:"get",noNoticeError:!0,params:e})}function i(e){return Object(r["a"])({url:"api/Sys/GetSelRoleList",method:"get",params:e})}function o(e){return Object(r["a"])({url:"api/Sys/GetEnableProfessionnalTitles",method:"get",params:e})}function l(e){return Object(r["a"])({url:"api/Sys/GetEnableExaminerProfessionnalTitles",method:"get",params:e})}function s(e){return Object(r["a"])({url:"api/Global/GetRegionList",method:"get",params:e})}function c(e){return Object(r["a"])({url:"api/Station/GetSelSites",method:"get",params:e})}function u(e){return Object(r["a"])({url:"api/Sys/EnableProfessionList",method:"get",params:e})}function m(e){return Object(r["a"])({url:"api/Examination/LoadQuestionBankOptions",method:"get",params:e})}function d(e){return Object(r["a"])({url:"api/Sys/GetEnableEQLanguages",method:"get",params:e})}function f(e){return Object(r["a"])({url:"api/Station/EnableExamRoomLst",method:"get",params:e})}function p(e){return Object(r["a"])({url:"images/Upload/TempPic",method:"post",data:e,multiple:!0})}function h(e){return Object(r["a"])({url:"images/Upload/TempFile",method:"post",data:e,multiple:!0})}function b(e){return Object(r["a"])({url:"api/images/Upload/NewPic",method:"post",data:e,multiple:!0})}function g(e){return Object(r["a"])({url:"api/Station/EnableExaminerInfos",method:"get",params:e})}},"2fa5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[n("bar",{attrs:{slot:"title"},slot:"title"},[n("bar-space"),n("bar-cell",[n("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:e.doRefresh}},[e._v("刷新")])],1),"Station"===e.roles?n("bar-cell",[n("el-button",{attrs:{type:"danger",size:e.tableSize},on:{click:e.doImport}},[e._v("导入复鉴人员名单")])],1):e._e(),"Station"===e.roles?n("bar-cell",[n("el-button",{attrs:{type:"danger",size:e.tableSize},on:{click:e.doCreate}},[e._v("生成复鉴计划")])],1):e._e()],1),n("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},["Department"===e.roles||"Guidance"===e.roles?n("area-select",{attrs:{"area-label":"省份","show-city":!1,"province-code":e.searchForm.ProvinceID},on:{areaSelectChange:e.searchFormAreaChange}}):e._e(),"Station"===e.roles?n("el-form-item",{attrs:{label:"复鉴状态"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.review_status,callback:function(t){e.$set(e.searchForm,"review_status",t)},expression:"searchForm.review_status"}},e._l(e.reviewOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),n("el-form-item",{attrs:{label:"复鉴结果"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.review_result,callback:function(t){e.$set(e.searchForm,"review_result",t)},expression:"searchForm.review_result"}},e._l(e.resultOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"处理进度"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.speed,callback:function(t){e.$set(e.searchForm,"speed",t)},expression:"searchForm.speed"}},e._l(e.speedOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[n("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"姓名/证件号码/证书编号",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),n("el-form-item",{attrs:{label:"操作"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),n("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[n("el-table-column",{attrs:{slot:"plan",label:"计划安排","min-width":"200","header-align":"center"},slot:"plan",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return e._l(r.plan,(function(t,r){return n("div",{key:r},[e._v(e._s(t))])}))}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作","min-width":"100",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-link",{on:{click:function(t){return e.doLook(r)}}},[e._v("查看")]),"Station"===e.roles?n("el-link",{attrs:{type:"danger"},on:{click:e.doGuidance}},[e._v("提交指导中心")]):e._e(),"Guidance"===e.roles?n("el-link",{attrs:{type:"danger"},on:{click:e.doReview}},[e._v("审批处理")]):e._e(),"Guidance"===e.roles?n("el-link",{attrs:{type:"primary"},on:{click:e.doPrint}},[e._v("打印证书")]):e._e()]}}])})],1),n("el-dialog",{attrs:{title:"生成复鉴计划",visible:e.formVisible,"before-close":e.formClose,"destroy-on-close":""},on:{"update:visible":function(t){e.formVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,size:e.tableSize,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"考试科目",required:""}},[n("el-radio-group",{model:{value:e.form.ERType,callback:function(t){e.$set(e.form,"ERType",t)},expression:"form.ERType"}},[n("el-radio",{attrs:{label:0,border:""}},[e._v("理论")]),n("el-radio",{attrs:{label:1,border:""}},[e._v("技能")])],1)],1),n("el-form-item",{attrs:{label:"考试名称",prop:"PlanName",rules:[{required:!0,message:"请填写",trigger:"change"}]}},[n("el-input",{model:{value:e.form.PlanName,callback:function(t){e.$set(e.form,"PlanName","string"===typeof t?t.trim():t)},expression:"form.PlanName"}})],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"考试日期",prop:"datetime",rules:[{required:!0,message:"请选择日期时间",trigger:"change"}]}},[n("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","picker-options":e.pickerOptions},model:{value:e.form.datetime,callback:function(t){e.$set(e.form,"datetime",t)},expression:"form.datetime"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"考试时长",prop:"Duration",rules:[{required:!0,message:"请输入",trigger:"blur"},{validator:e.greaterThanZero,trigger:"blur"}]}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.Duration,callback:function(t){e.$set(e.form,"Duration",e._n(t))},expression:"form.Duration"}},[n("template",{slot:"append"},[e._v("分钟")])],2)],1)],1)],1),n("el-form-item",{attrs:{label:"选择考场",prop:"ERIID",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择合适的考场"},on:{change:e.selectERIID},model:{value:e.form.ERIID,callback:function(t){e.$set(e.form,"ERIID",t)},expression:"form.ERIID"}},e._l(e.roomOptions,(function(e){return n("el-option",{key:e.ERIID,attrs:{label:"（"+e.ERNumber+"）"+e.ERName,value:e.ERIID}})})),1)],1),n("el-form-item",{attrs:{label:"可考人数"}},[n("strong",[e._v(e._s(e.form.ERINumber))]),e._v("位 ")]),n("el-form-item",{attrs:{label:"已选考生",prop:"selectStudents",rules:[{type:"array",required:!0,message:"请至少选择一个考生",trigger:"change"}]}},[n("div",{staticClass:"mb-10",attrs:{flex:"cross:center"}},[n("span",{staticClass:"mr-10"},[n("strong",[e._v(e._s(e.form.selectStudents.length))]),e._v("人 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addStudent}},[e._v("添加考生")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.form.selectStudents.length,expression:"form.selectStudents.length"}]},[n("div",e._l(e.form.selectStudents,(function(t,r){return n("el-tag",{key:r,attrs:{closable:"",type:"primary"},on:{close:function(n){return e.removeStudent(t)}}},[e._v(e._s(t.Name))])})),1),n("span",[n("el-checkbox",{model:{value:e.form.isNotice,callback:function(t){e.$set(e.form,"isNotice",t)},expression:"form.isNotice"}},[e._v("对考生发起信息通知")])],1)])])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1),n("el-dialog",{attrs:{width:"30%",title:"选择考生",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[n("div",[e._v(" "+e._s(e.form.ERType?"理论":"技能")+" 带复鉴人员 "),n("strong",{staticClass:"text-red"},[e._v(e._s(e.innerTableData.length))]),e._v(" 人 ")]),n("table-body",{ref:"innerTable",attrs:{"has-padding":!1,columns:e.innnerColumns,"table-data":e.innerTableData,options:e.tableOptions,"selection-row":e.selectionRow},on:{"selection-change":e.handleSelectionChange}})],1)],1)],1)},a=[],i=(n("7db0"),n("4160"),n("d3b7"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),o=n("5530"),l=n("2f62"),s=n("61f7"),c=n("2934"),u={name:"CertificateReviewIndex",components:{AreaSelect:function(){return n.e("chunk-2d209560").then(n.bind(null,"a92d"))},Bar:function(){return n.e("chunk-2d0bac10").then(n.bind(null,"390d"))},BarCell:function(){return n.e("chunk-2d221e17").then(n.bind(null,"cbdf"))},BarSpace:function(){return n.e("chunk-2d2218de").then(n.bind(null,"cb9b"))},SearchPanel:function(){return n.e("chunk-c808d2de").then(n.bind(null,"978e"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))}},data:function(){var e=this;return{searchPanelActive:!0,searchForm:{ProvinceID:null,review_status:null,review_result:null,speed:null,search_key:""},tableLoading:!1,indexRow:{title:"#",align:"center",width:50},columns:[{title:"姓名",key:"Name",align:"center",minWidth:100},{title:"性别",key:"sex",align:"center",formatter:function(e,t,n,r){return e.sex?"男":"女"}},{title:"证件号码",key:"papersNumber",headerAlign:"center",minWidth:160},{title:"鉴定工种/等级/方向",key:"ExaminationIdentificationTypes",align:"center",minWidth:200},{title:"证件编号",key:"papersNO",headerAlign:"center",minWidth:100},{title:"状态",key:"Status",align:"center",formatter:function(e,t,n,r){return e.Status?"复鉴中":"已复鉴"}},{title:"计划安排",slot:"plan"},{title:"理论成绩",key:"theory",align:"center",minWidth:80,formatter:function(e,t,n,r){return e.theory?e.theory:"".concat(e.theory,"(缺考)")}},{title:"技能成绩",key:"skill",align:"center",minWidth:80,formatter:function(e,t,n,r){return e.skill?e.skill:"".concat(e.skill,"(缺考)")}},{title:"复鉴结果",key:"result",align:"center",formatter:function(t,n,r,a){var i=e.resultOptions.find((function(e){return e.value===t.result}));return i?i.label:""}},{title:"处理进度",key:"speed",align:"center",formatter:function(t,n,r,a){var i=e.speedOptions.find((function(e){return e.value===t.speed}));return i?i.label:""}}],tableData:[{Name:"惜理湖涂",sex:1,papersNumber:"445381100993242333",ExaminationIdentificationTypes:"消防设施操作员-初级/五级-消防设施监控操作",papersNO:"76897879",Status:0,plan:["理论：2020-06-07 10:00","技能：2020-06-08 10:00"],theory:100,skill:0,result:1,speed:2}],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0},formVisible:!1,form:{ERType:0,PlanName:"",datetime:"",Duration:"",ERIID:null,ERINumber:0,selectStudents:[],isNotice:!0},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},innerVisible:!1,innnerColumns:[{title:"姓名",key:"Name",align:"center",minWidth:100},{title:"身份证号",key:"papersNumber",headerAlign:"center",minWidth:160},{title:"等级/方向",key:"GradeDirection",align:"center",minWidth:200}],innerTableData:[{id:1,Name:"第一个",papersNumber:"44210998899342333",GradeDirection:"五级/初级-消防设置监控员"},{id:2,Name:"第二个",papersNumber:"44218908232312313",GradeDirection:"一级/高级-消防员"}],selectionRow:{align:"center"},reviewOptions:[{value:0,label:"已复鉴"},{value:1,label:"附件中"}],resultOptions:[{value:0,label:"合格"},{value:1,label:"不合格"}],speedOptions:[{value:0,label:"待提交"},{value:1,label:"已审批"},{value:2,label:"已提交待审批"}],roomOptions:[]}},computed:Object(o["a"])({},Object(l["c"])({tableSize:function(e){return e.settings.tableSize}})),watch:{"form.ERType":{handler:function(e){this.form.ERType=e,this._getEnableExamRoomLst()}}},created:function(){var e=this.$store.getters.mainRoles;this.roles=e,"Team"!==e&&"Site"!==e||(this.searchForm.ProvinceID=0)},methods:{_getEnableExamRoomLst:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])({ERType:e.form.ERType});case 2:n=t.sent,n.success&&(e.roomOptions=n.response,e.form=Object(o["a"])(Object(o["a"])({},e.form),{},{ERIID:null,ERINumber:0}));case 4:case"end":return t.stop()}}),t)})))()},searchFormAreaChange:function(e){this.searchForm.ProvinceID=e.provinceCode},doRefresh:function(){},doImport:function(){this.$router.push({name:"ReviewPersonImport"})},doCreate:function(){this.formVisible=!0,this._getEnableExamRoomLst()},searchFormReset:function(){this.searchForm={ProvinceID:null,review_status:null,review_result:null,speed:null,search_key:""}},searchFormSubmit:function(){},doLook:function(e){this.$router.push({name:"CertificateReviewDetail",params:{id:1}})},doGuidance:function(){var e=this;this.$confirm("确认将该考生复核结果提交至指导中心进行审核?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(t){e.$notify({title:"成功",message:t.msg,type:"success"}),e.doRefresh()}))},doReview:function(e){var t=this,n=e.result?"确定该人员复鉴不合格，将其证书做失效处理":"确定通过该人员复鉴审批？";this.$confirm("".concat(n),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(e){t.$notify({title:"成功",message:e.msg,type:"success"}),t.doRefresh()}))},doPrint:function(){},formClose:function(){this.formVisible=!1},submitForm:function(){var e=this;this.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(r=e.form,a=r.ERINumber,i=r.selectStudents,!(i.length>a)){t.next=6;break}return e.$message.error("您选择参加考生大于考场人数，请您换个考场或者减少考生人数"),t.abrupt("return");case 6:e.$notify({title:"成功",message:"res.msg,",type:"success"}),e.formClose(),e.doRefresh(),e.$confirm("考试计划添加成功，请前往考务管理进行发布","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.form.ERType?"ExaminationSkillPlan":"ExaminationTheoryPlan";e.$router.replace({name:t})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},selectERIID:function(e){var t=this.roomOptions.find((function(t){return t.ERIID===e}));this.form.ERIName=t.ERName,this.form.ERINumber=t.EnableCount},handleSelectionChange:function(e){this.form.selectStudents=e},addStudent:function(){var e=this;this.innerVisible=!0;var t=this.selectStudents;t&&t.forEach((function(t){e.$refs.innerTable.$refs.elTable.toggleRowSelection(t)}))},removeStudent:function(){},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()},greaterThanZero:function(e,t,n){Object(s["d"])(t)||n(new Error("须大于0的正整数")),n()}}},m=u,d=(n("9d55"),n("2877")),f=Object(d["a"])(m,r,a,!1,null,"99fa9e14",null);t["default"]=f.exports},5171:function(e,t,n){},"9d55":function(e,t,n){"use strict";var r=n("5171"),a=n.n(r);a.a}}]);