(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-038f17c9"],{a075:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"search-wrapper"},[n("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("el-form-item",{attrs:{label:"答复状态",prop:"reply_state"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.reply_state,callback:function(t){e.$set(e.searchForm,"reply_state",t)},expression:"searchForm.reply_state"}},[n("el-option",{attrs:{label:"未回复",value:"0"}}),n("el-option",{attrs:{label:"已回复",value:"1"}})],1)],1),n("el-form-item",{attrs:{label:"提交时间范围"}},[n("date-range-picker",{model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),n("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入标题关键字",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),n("el-form-item",{attrs:{label:"操作"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),n("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[n("el-table-column",{attrs:{slot:"Status",label:"状态",align:"center"},slot:"Status",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[0==a.Status?n("span",{staticClass:"text-red"},[e._v("待回复")]):e._e(),1==a.Status?n("span",{staticClass:"text-green"},[e._v("已回复")]):e._e()]}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",fixed:"right","min-width":"160"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[0===a.Status?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"reply",expression:"'reply'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleReply(a)}}},[e._v("回复")]):e._e(),1===a.Status?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"detail",expression:"'detail'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleDetails(a)}}},[e._v("详情")]):e._e(),1===a.Status&&0===a.EntryStatus?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"warehousing",expression:"'warehousing'"}],on:{click:function(t){return e.handleEnter(a)}}},[e._v("录入问题库")]):e._e()]}}])})],1),n("el-dialog",{attrs:{title:e.isDetail?"详情":"回复咨询",visible:e.formVisible,"destroy-on-close":"","before-close":e.formClose}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,size:e.tableSize,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"咨询人"}},[n("span",[e._v(e._s(e.detail.UserName))])]),n("el-form-item",{attrs:{label:"联系电话"}},[n("span",[e._v(e._s(e.detail.MobilePhone))])]),n("el-form-item",{attrs:{label:"电子邮箱"}},[n("span",[e._v(e._s(e.detail.Email))])]),n("el-form-item",{attrs:{label:"咨询标题"}},[n("span",[e._v(e._s(e.detail.Title))])]),n("el-form-item",{attrs:{label:"咨询内容"}},[n("el-input",{attrs:{type:"textarea",readonly:"",autosize:""},model:{value:e.detail.Content,callback:function(t){e.$set(e.detail,"Content",t)},expression:"detail.Content"}})],1),n("el-form-item",{attrs:{label:"提交时间"}},[n("span",[e._v(e._s(e._f("parseTime")(e.detail.ConsultingDate,"{y}-{m}-{d}")))])]),n("el-divider"),n("el-form-item",{attrs:{label:"回复咨询",prop:"ReplyContent"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请根据咨询内容进行回复",autosize:{minRows:3},disabled:e.isDetail},model:{value:e.form.ReplyContent,callback:function(t){e.$set(e.form,"ReplyContent",t)},expression:"form.ReplyContent"}})],1),n("el-form-item",{attrs:{label:"公开方式",prop:"ShowType"}},[n("el-radio-group",{attrs:{disabled:e.isDetail},model:{value:e.form.ShowType,callback:function(t){e.$set(e.form,"ShowType",t)},expression:"form.ShowType"}},[n("el-radio",{attrs:{label:0}},[e._v("全部")]),n("el-radio",{attrs:{label:1}},[e._v("仅咨询人可见")])],1)],1)],1),e.isDetail?e._e():n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.formConfirm}},[e._v("确定回复")])],1)],1),n("el-dialog",{attrs:{title:"录入常见问题",visible:e.questionFormVisible,"destroy-on-close":"","before-close":e.questionFormClose}},[n("el-form",{ref:"questionForm",attrs:{model:e.questionForm,rules:e.questionFormRules,size:e.tableSize,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"问题",prop:"pContent"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入问题",autosize:{minRows:3}},model:{value:e.questionForm.pContent,callback:function(t){e.$set(e.questionForm,"pContent",t)},expression:"questionForm.pContent"}})],1),n("el-form-item",{attrs:{label:"答案",prop:"pAnswer"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请根据咨询内容进行回复",autosize:{minRows:3}},model:{value:e.questionForm.pAnswer,callback:function(t){e.$set(e.questionForm,"pAnswer",t)},expression:"questionForm.pAnswer"}})],1),n("el-form-item",{attrs:{label:"状态",prop:"status"}},[n("el-radio-group",{model:{value:e.questionForm.status,callback:function(t){e.$set(e.questionForm,"status",t)},expression:"questionForm.status"}},[n("el-radio",{attrs:{label:0}},[e._v("停用")]),n("el-radio",{attrs:{label:1}},[e._v("启用")])],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.questionFormConfirm}},[e._v("确定")])],1)],1)],1)},r=[],o=(n("d3b7"),n("5530")),i=n("2f62"),s=n("c2ec"),l=n("ed08"),u={data:function(){return{searchForm:{reply_state:"",time:[],search_key:""},tableLoading:!1,columns:[{title:"咨询标题",key:"Title",headerAlign:"center","min-width":"250px"},{title:"咨询内容",key:"Content",headerAlign:"center","min-width":"300px"},{title:"提交时间",key:"ConsultingDate",align:"center","min-width":"120px",formatter:function(e,t,n,a){return Object(l["e"])(e.ConsultingDate)||"--"}},{title:"回复时间",key:"ReplyDate",align:"center","min-width":"120px",formatter:function(e,t,n,a){return Object(l["e"])(e.ReplyDate)||"--"}},{title:"回复人员",key:"ReplyUserName",align:"center"},{title:"状态",key:"Status",slot:"Status"}],tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:1},isDetail:!1,formVisible:!1,detail:{},form:{ReplyContent:"",ShowType:""},formRules:{ReplyContent:[{required:!0,message:"请填写回复内容",trigger:"blur"}],ShowType:[{required:!0,message:"请选择公开方式",trigger:"change"}]},questionFormVisible:!1,questionForm:{pContent:"",pAnswer:"",status:1},questionFormRules:{pContent:[{required:!0,message:"请填写咨询内容",trigger:"blur"}],pAnswer:[{required:!0,message:"请填写回复内容",trigger:"blur"}]}}}},c={name:"ConsultList",components:{DateRangePicker:function(){return n.e("chunk-2d210a9a").then(n.bind(null,"b99f"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))}},mixins:[u],computed:Object(o["a"])({},Object(i["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doLoad()},methods:{doRefresh:function(){var e=this,t=this.searchForm,n=t.reply_state,a=t.time,r=t.search_key,o=this.pagination,i=o.currentPage,l=o.pageSize,u={Status:""===n?-1:n,sd:a.length?a[0]:"",ed:a.length?a[1]:"",key:r,PageIndex:i,PageSize:l};this.tableLoading=!0,Object(s["f"])(u).then((function(t){t.success&&(e.tableData=t.data,e.pagination.total=t.dataCount,e.tableLoading=!1)})).catch((function(t){e.tableLoading=!1}))},doLoad:function(){this.doRefresh()},searchFormSubmit:function(){this.doRefresh()},searchFormReset:function(){this.searchForm={reply_state:"",time:[],search_key:""},this.doRefresh()},handleDetails:function(e){var t=this,n={consultId:e.ConsultingID};Object(s["e"])(n).then((function(e){e.success&&(t.detail=e.response,t.isDetail=!0,t.form=e.response,t.formVisible=!0)}))},handleReply:function(e){var t=this,n={consultId:e.ConsultingID};Object(s["e"])(n).then((function(e){e.success&&(t.detail=e.response,t.isDetail=!1,t.form.ConsultingID=e.response.ConsultingID,t.formVisible=!0)}))},handleEnter:function(e){var t=this,n={consultId:e.ConsultingID};Object(s["e"])(n).then((function(n){if(n.success){var a=n.response,r=a.Content,o=a.ReplyContent;t.questionForm={consultid:e.ConsultingID,pContent:r,pAnswer:o,status:1},t.questionFormVisible=!0}}))},formClose:function(){this.formVisible=!1,this.form={ReplyContent:"",ShowType:""}},formConfirm:function(){var e=this;this.$refs.form.validate((function(t){t?e.$confirm("是否确定回复该咨询?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(s["l"])(e.form).then((function(t){t.success&&(e.formClose(),e.doRefresh(),e.$message({message:"恭喜您，提交成功",type:"success"}))}))})):console.log("error submit!!")}))},questionFormClose:function(){this.questionFormVisible=!1,this.questionForm={pContent:"",pAnswer:"",status:1}},questionFormConfirm:function(){var e=this;this.$refs.questionForm.validate((function(t){t&&e.$confirm("是否将该咨询回复内容录入到常见问题库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(s["a"])(e.questionForm).then((function(t){t.success&&(e.doRefresh(),e.$message({message:"恭喜您，提交成功",type:"success"}),e.questionFormClose())}))}))}))},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()}}},m=c,p=n("2877"),d=Object(p["a"])(m,a,r,!1,null,null,null);t["default"]=d.exports},c2ec:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return d})),n.d(t,"n",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return g}));var a=n("b775");function r(e){return Object(a["a"])({url:"api/WebManager/GetConsult",method:"get",params:e})}function o(e){return Object(a["a"])({url:"api/WebManager/GetConsultList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"api/WebManager/ReplyConsult",method:"post",data:e})}function s(e){return Object(a["a"])({url:"api/WebManager/GetReportComplaints",method:"get",params:e})}function l(e){return Object(a["a"])({url:"api/WebManager/GetReportComplaintsList",method:"get",params:e})}function u(e){return Object(a["a"])({url:"api/WebManager/ReplyReport",method:"post",data:e})}function c(e){return Object(a["a"])({url:"api/WebManager/HandleReportComplaints",method:"post",data:e})}function m(e){return Object(a["a"])({url:"api/WebManager/AddProblemBase",method:"post",data:e})}function p(e){return Object(a["a"])({url:"api/WebManager/GetProblemBase",method:"get",params:e})}function d(e){return Object(a["a"])({url:"api/WebManager/GetProblemBaseList",method:"get",params:e})}function f(e){return Object(a["a"])({url:"api/WebManager/UpdateProblemBase",method:"post",data:e})}function b(e){return Object(a["a"])({url:"api/WebManager/EnableProblemBase",method:"post",data:e})}function h(e){return Object(a["a"])({url:"api/WebManager/DisableProblemBase",method:"post",data:e})}function g(e){return Object(a["a"])({url:"api/WebManager/DeleteProblemBase",method:"post",data:e})}}}]);