(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f9280fb"],{"5d8b":function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"o",(function(){return i})),n.d(t,"r",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"n",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"q",(function(){return D})),n.d(t,"p",(function(){return S})),n.d(t,"s",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"h",(function(){return O}));var r=n("b775");function a(e){return Object(r["a"])({url:"api/station/ExaminerInfos",method:"get",params:e})}function i(e){return Object(r["a"])({url:"api/station/LoadExaminerInfo",method:"get",params:e})}function o(e){return Object(r["a"])({url:"api/station/SaveExaminerInfo",method:"post",data:e})}function s(e){return Object(r["a"])({url:"api/station/EnableExaminer",method:"get",params:e})}function l(e){return Object(r["a"])({url:"api/station/DisableExaminer",method:"get",params:e})}function c(e){return Object(r["a"])({url:"api/station/ExaminerTrainings",method:"get",params:e})}function u(e){return Object(r["a"])({url:"api/station/AddExaminerTrainings",method:"post",data:e})}function d(e){return Object(r["a"])({url:"api/station/DelExaminerTrainings",method:"get",params:e})}function f(e){return Object(r["a"])({url:"api/station/ExaminerPraises",method:"get",params:e})}function h(e){return Object(r["a"])({url:"api/station/AddExaminerPraise",method:"post",data:e})}function b(e){return Object(r["a"])({url:"api/station/DelExaminerPraise",method:"get",params:e})}function m(e){return Object(r["a"])({url:"api/station/ExaminerDisciplines",method:"get",params:e})}function p(e){return Object(r["a"])({url:"api/station/AddExaminerDiscipline",method:"post",data:e})}function g(e){return Object(r["a"])({url:"api/station/DelExaminerDiscipline",method:"post",data:e})}function D(e){return Object(r["a"])({url:"api/station/PersonnelRecordsList",method:"get",params:e})}function S(e){return Object(r["a"])({url:"api/station/LoadPersonnelRecords",method:"get",params:e})}function v(e){return Object(r["a"])({url:"api/station/SavePersonnelRecords",method:"post",data:e})}function y(e){return Object(r["a"])({url:"api/station/EnablePersonnelRecords",method:"get",params:e})}function O(e){return Object(r["a"])({url:"api/station/DisablePersonnelRecords",method:"get",params:e})}},"619e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("bar",{attrs:{slot:"title"},slot:"title"},[n("bar-cell",[n("h4",[e._v("姓名："+e._s(e.userInfo.UserName))])]),n("bar-cell",[n("el-select",{attrs:{placeholder:"请选择年份",size:e.tableSize},on:{change:e.changeYear},model:{value:e.yearSelect,callback:function(t){e.yearSelect=t},expression:"yearSelect"}},e._l(e.years,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("bar-space"),e.showBtnCreate?n("bar-cell",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:e.tableSize},on:{click:e.handleCreate}},[e._v("录入违纪情况")])],1):e._e()],1),n("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"has-padding":!1}},[n("el-table-column",{attrs:{slot:"Status",label:"状态",align:"center","min-width":"50px"},slot:"Status",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.IsDeleted?n("span",{staticClass:"text-red"},[e._v("已删除")]):e._e(),r.IsDeleted?e._e():n("span",[e._v("生效")])]}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作",width:"230",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[!r.IsDeleted&&e.showBtnDelete?n("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.handleDetele(r)}}},[e._v("删除")]):e._e(),r.IsDeleted?n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleReason(r)}}},[e._v("查看原因")]):e._e()]}}])})],1),n("RecordDialog",{attrs:{visible:e.recordFormVisible,scope:e.lessScope,category:"Violation"},on:{"update:visible":function(t){e.recordFormVisible=t},sure:e.recordDialogSure}}),n("DeleteDialog",{attrs:{visible:e.reasonFormVisible},on:{"update:visible":function(t){e.reasonFormVisible=t},sure:e.reasonDialogSure}})],1)},a=[],i=(n("99af"),n("d81d"),n("d3b7"),n("5530")),o=n("2f62"),s=n("ed08"),l=n("5d8b"),c={name:"Violation",components:{Bar:function(){return n.e("chunk-2d0bac10").then(n.bind(null,"390d"))},BarCell:function(){return n.e("chunk-2d221e17").then(n.bind(null,"cbdf"))},BarSpace:function(){return n.e("chunk-2d2218de").then(n.bind(null,"cb9b"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))},RecordDialog:function(){return n.e("chunk-2d0a4f99").then(n.bind(null,"0971"))},DeleteDialog:function(){return n.e("chunk-2d0b97f7").then(n.bind(null,"32ce"))}},props:{userInfo:{type:Object,default:null}},data:function(){return{recordFormVisible:!1,reasonFormVisible:!1,reasonDelId:"",yearSelect:"",years:[],lessScope:0,columns:[{title:"违纪时间",key:"DisciplineDate",headerAlign:"center",formatter:function(e,t,n,r){return Object(s["e"])(e.DisciplineDate,"{y}-{m}-{d}")}},{title:"违纪地点",key:"Address",headerAlign:"center"},{title:"违纪内容",key:"DisciplineContent",headerAlign:"center"},{title:"扣除分值",key:"DisciplineFraction",headerAlign:"center"},{title:"状态",key:"IsDeleted",slot:"Status"}],tableLoading:!1,tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),{},{showBtnCreate:function(){var e=this.roles;return"Station"===e||"Site"===e},showBtnDelete:function(){var e=this.roles;return"Station"===e||"Site"===e}}),created:function(){this.doLoad()},methods:{doLoad:function(){this.$route.params&&this.$route.params.id&&(this.id=this.$route.params.id,this.doRefresh())},doRefresh:function(){var e=this;this.roles=this.$store.getters.mainRoles,this.tableLoading=!0;var t={ExaminerID:this.id,Year:""===this.yearSelect?0:this.yearSelect};Object(l["k"])(t).then((function(t){if(e.tableLoading=!1,t.success){var n=t.response,r=n.yearlst,a=n.datalist,i=n.Fraction;if(e.lessScope=i,r&&r.length>0){var o=r.map((function(e){return{label:e+"年",value:e}}));e.years=o}e.tableData=a}})).catch((function(t){console.log(t),e.tableLoading=!1}))},changeYear:function(){this.doRefresh()},recordFormShow:function(){this.recordFormVisible=!0},recordFormHide:function(){this.recordFormVisible=!1},reasonFormShow:function(){this.reasonFormVisible=!0},reasonFormHide:function(){this.reasonDelId="",this.reasonFormVisible=!1},handleCreate:function(){this.recordFormShow()},handleDetele:function(e){this.reasonDelId=e.DisciplineID,this.reasonFormShow()},handleReason:function(e){this.$alert(e.DelRemark,"查看删除")},reasonDialogSure:function(e){var t=this,n={examinerID:this.id,disciplineID:this.reasonDelId,delRemark:e.reason};Object(l["d"])(n).then((function(e){e.success&&(t.reasonFormHide(),t.$message({type:"success",message:"删除成功!"}),t.doRefresh())}))},recordDialogSure:function(e){var t=this,n=e.date,r=e.address,a=e.content,i=e.deduction;if(i>this.lessScope)this.$message.warning("扣除分值超过剩余分值");else{var o={examinerID:this.id,DisciplineDate:n,address:r,DisciplineContent:a,disciplineFraction:i};this.$confirm("是否确认录入违纪情况?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])(o).then((function(e){if(e.success){var n=e.response;t.lessScope=n,t.recordFormHide(),t.doRefresh();var r="已成功录入考评员【".concat(t.userInfo.UserName,"】违纪情况，本次扣除分值").concat(i,"分，本年度剩余分值").concat(n,"分。");0===n&&(r+="系统已自动停用该考评员，考评员今年将无法继续参加考评工作！"),t.$alert(r,"录入成功")}}))}))}}}},u=c,d=n("2877"),f=Object(d["a"])(u,r,a,!1,null,null,null);t["default"]=f.exports}}]);