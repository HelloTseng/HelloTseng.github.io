(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71d13464"],{"02ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[a("bar",{attrs:{slot:"title"},slot:"title"},[a("bar-space"),a("bar-cell",[a("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:e.doRefresh}},[e._v("刷新")])],1)],1),a("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"日期类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}},e._l(e.dateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"日期范围"}},[a("date-range-picker",{model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),a("el-form-item",{attrs:{label:"审批状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.violationStatus,callback:function(t){e.$set(e.searchForm,"violationStatus",t)},expression:"searchForm.violationStatus"}},e._l(e.violationOpions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[a("el-table-column",{attrs:{slot:"AuditStatus",label:"审批状态",align:"center","min-width":100},slot:"AuditStatus",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.AuditStatus?a("span",{staticClass:"text-red"},[e._v("待审批")]):2===n.AuditStatus?a("span",{staticClass:"text-green"},[e._v("审批通过")]):3===n.AuditStatus?a("span",{staticClass:"text-red"},[e._v("审批驳回")]):4===n.AuditStatus?a("span",{staticClass:"text-black-40"},[e._v("取消申请")]):a("span",[e._v("-")])]}}])}),a("el-table-column",{attrs:{slot:"operate",label:"操作","min-width":"100",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.AuditStatus?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"handle",expression:"'handle'"}],attrs:{type:"danger"},on:{click:function(t){return e.doExamine(n)}}},[e._v("审批")]):a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"look",expression:"'look'"}],on:{click:function(t){return e.doLook(n)}}},[e._v("查看")])]}}])})],1)],1)},i=[],r=(a("7db0"),a("d81d"),a("d3b7"),a("5530")),o=a("2f62"),l=a("4654"),c=a("ed08"),u={name:"ExamViolationExamine",components:{Bar:function(){return a.e("chunk-2d0bac10").then(a.bind(null,"390d"))},BarCell:function(){return a.e("chunk-2d221e17").then(a.bind(null,"cbdf"))},BarSpace:function(){return a.e("chunk-2d2218de").then(a.bind(null,"cb9b"))},DateRangePicker:function(){return a.e("chunk-2d210a9a").then(a.bind(null,"b99f"))},SearchPanel:function(){return a.e("chunk-c808d2de").then(a.bind(null,"978e"))},TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))}},data:function(){var e=this;return{searchPanelActive:!0,searchForm:{dateType:0,times:[],violationStatus:null},dateOptions:[{value:0,label:"提交时间"},{value:1,label:"审批时间"}],violationOpions:[{value:1,label:"待审批"},{value:2,label:"审批通过"},{value:3,label:"审批驳回"},{value:4,label:"取消申请"}],degreeOptions:[{value:0,label:"普通违纪"},{value:1,label:"严重违纪"},{value:2,label:"特别严重违纪"}],subjectOptions:[{value:0,label:"理论"},{value:1,label:"技能"}],tableLoading:!1,indexRow:{title:"#",align:"center",width:"50px"},columns:[{title:"类型",key:"EnrollType",align:"center",formatter:function(e,t,a,n){return(e.EnrollType?"复鉴":"正常")+"考试"}},{title:"姓名",key:"UserName",align:"center",minWidth:100},{title:"性别",key:"Gender",align:"center",formatter:function(e,t,a,n){var i="";switch(e.Gender){case 0:i="女";break;case 1:i="男";break;case 2:i="保密";break}return i}},{title:"证件号码",key:"IDCardNum",headerAlign:"center",minWidth:160},{title:"考试时间",key:"ExamBeginDate",align:"center",minWidth:160,formatter:function(e,t,a,n){return Object(c["e"])(e.ExamBeginDate,"{y}-{m}-{d} {h}:{i}")+" -"+Object(c["e"])(e.ExamEndDate,"{h}:{i}")}},{title:"考试科目",key:"PlanType",align:"center",formatter:function(t,a,n,i){if("undefined"!==typeof t.PlanType)return e.subjectOptions.find((function(e){return e.value===t.PlanType})).label}},{title:"违纪程度",key:"ViolationLevel",align:"center",minWidth:100,formatter:function(t,a,n,i){if("undefined"!==typeof t.ViolationLevel)return e.degreeOptions.find((function(e){return e.value===t.ViolationLevel})).label}},{title:"违纪情况",key:"ViolationContent",headerAlign:"center",minWidth:200},{title:"提交时间",key:"CreateDate",align:"center",minWidth:130,formatter:function(e,t,a,n){return Object(c["e"])(e.CreateDate,"{y}-{m}-{d} {h}:{i}")}},{title:"提交人",key:"Creator",align:"center",minWidth:100},{title:"审批状态",key:"AuditStatus",slot:"AuditStatus"},{title:"审批人",key:"Auditor",align:"center",minWidth:100},{title:"审批时间",key:"AuditDate",align:"center",minWidth:130,formatter:function(e,t,a,n){return Object(c["e"])(e.AuditDate,"{y}-{m}-{d} {h}:{i}")}},{title:"审批意见",key:"AuditRemark",headerAlign:"center",minWidth:200}],tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0}}},computed:Object(r["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doRefresh()},methods:{doRefresh:function(){var e=this;if(!this.tableLoading){var t=this.searchForm,a=t.dateType,n=t.times,i=t.violationStatus,o=this.pagination,c=o.currentPage,u=o.pageSize,s={dateStart:n.length?n[0]:"",dateEnd:n.length?n[1]:"",dateType:a,violationStatus:i||-1,pageIndex:c,pageSize:u};this.tableLoading=!0,Object(l["g"])(s).then((function(t){var a=[];t.data.length&&(a=t.data.map((function(e){return Object(r["a"])(Object(r["a"])(Object(r["a"])({},e),e.Student),e.ViolationDetail)}))),e.tableData=a,e.pagination.total=t.dataCount,e.tableLoading=!1})).catch((function(t){e.tableLoading=!1}))}},doLook:function(e){this.$router.push({name:"ExamViolationExamineDetail",params:{id:e.OrderID}})},doExamine:function(e){this.$router.push({name:"ExamViolationExamineDetail",params:{id:e.OrderID}})},searchFormSubmit:function(){this.pagination.currentPage=1,this.doRefresh()},searchFormReset:function(){this.searchForm={dateType:0,times:[],violationStatus:null}},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()}}},s=u,d=a("2877"),h=Object(d["a"])(s,n,i,!1,null,null,null);t["default"]=h.exports},4654:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"k",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"h",(function(){return s})),a.d(t,"j",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"g",(function(){return m})),a.d(t,"l",(function(){return p})),a.d(t,"i",(function(){return f}));var n=a("b775");function i(e){return Object(n["a"])({url:"api/Score/getQualifiedEnrollPageList",method:"get",params:e})}function r(e){return Object(n["a"])({url:"api/Score/GetAllScoreDetail",method:"get",params:e})}function o(e){return Object(n["a"])({url:"api/Score/GetScoreSearchList",method:"get",params:e})}function l(e){return Object(n["a"])({url:"api/Score/PublishScoreResult",method:"post",data:e})}function c(e){return Object(n["a"])({url:"api/Score/GetScoreDetail",method:"get",params:e})}function u(e){return Object(n["a"])({url:"api/Score/CheckViolationRecord",method:"get",params:e})}function s(e){return Object(n["a"])({url:"api/Score/GetViolationSetting",method:"get",params:e})}function d(e){return Object(n["a"])({url:"api/Score/PostViolationRecord",method:"post",data:e})}function h(e){return Object(n["a"])({url:"api/Score/CancelViolationRecord",method:"post",data:e})}function m(e){return Object(n["a"])({url:"api/Score/GetViolationCheckList",method:"get",params:e})}function p(e){return Object(n["a"])({url:"api/Score/RefuseViolationRecord",method:"post",data:e})}function f(e){return Object(n["a"])({url:"api/Score/PassViolationRecord",method:"post",data:e})}}}]);