(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-162c4695","chunk-24c61ed4"],{2934:function(e,t,i){"use strict";i.d(t,"g",(function(){return a})),i.d(t,"f",(function(){return s})),i.d(t,"h",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return c})),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return l})),i.d(t,"k",(function(){return p})),i.d(t,"j",(function(){return d})),i.d(t,"i",(function(){return f})),i.d(t,"c",(function(){return m}));var n=i("b775");function a(e){return Object(n["a"])({url:"api/Sys/GetSelRoleList",method:"get",params:e})}function s(e){return Object(n["a"])({url:"api/Global/GetRegionList",method:"get",params:e})}function r(e){return Object(n["a"])({url:"api/Station/GetSelSites",method:"get",params:e})}function o(e){return Object(n["a"])({url:"api/Sys/EnableProfessionList",method:"get",params:e})}function c(e){return Object(n["a"])({url:"api/Examination/LoadQuestionBankOptions",method:"get",params:e})}function u(e){return Object(n["a"])({url:"api/Sys/GetEnableEQLanguages",method:"get",params:e})}function l(e){return Object(n["a"])({url:"api/Station/EnableExamRoomLst",method:"get",params:e})}function p(e){return Object(n["a"])({url:"images/Upload/TempPic",method:"post",data:e,multiple:!0})}function d(e){return Object(n["a"])({url:"images/Upload/TempFile",method:"post",data:e,multiple:!0})}function f(e){return Object(n["a"])({url:"api/images/Upload/NewPic",method:"post",data:e,multiple:!0})}function m(e){return Object(n["a"])({url:"api/Station/EnableExaminerInfos",method:"get",params:e})}},3516:function(e,t,i){"use strict";var n=i("8f46"),a=i.n(n);a.a},"8f46":function(e,t,i){},c7f0:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],class:{hide:e.checkLimit,shortListType:e.shortListType},attrs:{"http-request":e.uploadRequest,"file-list":e.fileList,action:"#",headers:e.headers,"before-upload":e.handleBeforeUpload,"on-exceed":e.handleExceed,"on-error":e.handleError,"before-remove":e.handleBeforeRemove,"on-remove":e.handleRemove}},"el-upload",e.$attrs,!1),[e.isDrag?i("div",[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),i("em",[e._v("点击上传")])])]):i("div",[e.isImage?i("i",{staticClass:"el-icon-plus"}):e._e(),e.isImage?e._e():i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e.isImage?e._e():i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传"+e._s(e.exhibit)+"文件， "),e._t("additional"),e._v(" 且不超过"+e._s(e.sizeTip)+" ")],2)])},a=[],s=(i("99af"),i("7db0"),i("caad"),i("c975"),i("a15b"),i("baa5"),i("d81d"),i("a434"),i("b0c0"),i("a9e3"),i("b64b"),i("ac1f"),i("2532"),i("5319"),i("1276"),i("96cf"),i("1da1")),r=i("2934"),o=i("5f87"),c=i("cf45"),u=i("60fe"),l={props:{fileList:{type:Array,default:null},isHeaders:{type:Boolean,default:!1},limitSize:{type:Number,required:!0},rowIndex:{type:Object,default:null},getFileList:{type:Function,default:function(){}},getFileSize:{type:Function,default:function(){}},shortListType:{type:Boolean,default:!1},beforeBeforeUpload:{type:Function,default:function(){}}},data:function(){return{uploadLoading:!1,exhibit:"",acceptTxt:"",acceptObj:{},types:[],sizeTip:""}},computed:{checkLimit:function(){return!!this.fileList&&(this.$attrs.limit>0&&this.fileList.length>=this.$attrs.limit)},isDrag:function(){return Object.keys(this.$attrs).indexOf("drag")>-1},isImage:function(){return"picture-card"===this.$attrs["list-type"]},headers:function(){return this.isHeaders?{Authorization:Object(o["b"])()}:{}}},created:function(){var e=this.$attrs["accept"],t=e.replace(/\s/g,"").split(",").map((function(e){return e.replace(".","")}));this.types=t,this.exhibit=t.join("/"),this.sizeTip=Object(c["e"])(this.limitSize)},methods:{loadingOpen:function(){this.uploadLoading=!0},loadingClose:function(){this.uploadLoading=!1},hasInclude:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),i=u["f"].find((function(e){return e.type.includes(t)}));return this.acceptTxt=i.txt,this.acceptObj=i,this.types.includes(t)},uploadRequest:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n,a,s,o,u,l,p,d,f,m,h,b,g,x,v,L;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.loadingOpen(),i.prev=1,console.log("param",e),n=e.file,a=new FormData,a.append("file",n),"text"!==t.$attrs["list-type"]){i.next=20;break}if("图片"!==t.acceptObj.txt){i.next=13;break}return i.next=10,Object(r["k"])(a);case 10:s=i.sent,i.next=16;break;case 13:return i.next=15,Object(r["j"])(a);case 15:s=i.sent;case 16:t.loadingClose(),s.success&&(o=s.response,u=o.fileName,l=o.weburl,p=o.webupurl,d=o.sourceName,f={name:d,webupurl:p,url:l,fileName:u,type:Object(c["g"])(n.name)},console.log("uploadTempFile fileObj",n),t.fileList.push(f),t.getFileList("success",f,t.fileList,t.rowIndex),t.getFileSize(n.size),t.$notify({title:"成功",message:s.msg,type:"success"})),i.next=25;break;case 20:return i.next=22,Object(r["k"])(a);case 22:m=i.sent,t.loadingClose(),m.success&&(h=m.response,b=h.fileName,g=h.weburl,x=h.webupurl,v=h.sourceName,L={name:v,webupurl:x,url:g,fileName:b,type:Object(c["g"])(n.name)},console.log("uploadTempPic fileObj",n),t.fileList.push(L),t.getFileList("success",L,t.fileList,t.rowIndex),t.getFileSize(n.size),t.$notify({title:"成功",message:"".concat(t.acceptTxt).concat(m.msg),type:"success"}));case 25:i.next=32;break;case 27:i.prev=27,i.t0=i["catch"](1),t.loadingClose(),t.fileList.pop(),t.$message.error("上传文件错误: ".concat(i.t0.message));case 32:case"end":return i.stop()}}),i,null,[[1,27]])})))()},handleBeforeUpload:function(e){return this.hasInclude(e)?e.size>1024*this.limitSize?(this.$message.error("".concat(this.acceptTxt,"大小不得大于").concat(this.sizeTip)),!1):this.beforeBeforeUpload?this.beforeBeforeUpload(e):void 0:(this.$message.error("仅可上传".concat(this.exhibit,"格式文件")),!1)},handleExceed:function(e,t){this.$message.warning("当前限制选择 ".concat(this.$attrs.limit," 个文件，本次选择了 ").concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleError:function(){this.$message.error("".concat(this.acceptTxt,"上传失败，请稍后重试"))},handleBeforeRemove:function(e,t){if(e&&"success"===e.status)return this.$confirm("确定移除 ".concat(e.name,"？"),{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"})},handleRemove:function(e,t){var i=this;this.fileList.map((function(t,n){t.fileName===e.fileName&&(i.fileList.splice(n,1),i.getFileList("remove",t,i.fileList,i.rowIndex))}))}}},p=l,d=(i("3516"),i("2877")),f=Object(d["a"])(p,n,a,!1,null,null,null);t["default"]=f.exports}}]);