(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfb7a85a"],{c6fc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-wrapper"},[a("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"违纪时间范围"}},[a("date-range-picker",{model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),a("el-form-item",{attrs:{label:"违纪程度"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.degree,callback:function(t){e.$set(e.searchForm,"degree",t)},expression:"searchForm.degree"}},e._l(e.degreeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入姓名/证件号码/违纪内容",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{"index-row":e.indexRow,loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 本次查询共 "),a("strong",{staticClass:"text-red"},[e._v(e._s(e.pagination.total))]),e._v(" 条数据，其中处于禁考期 "),a("strong",{staticClass:"text-red"},[e._v(e._s(e.bannedCount))]),e._v(" 人 ")]),a("el-table-column",{attrs:{slot:"IsTakeEffect",label:"当前状态","min-width":80,align:"center"},slot:"IsTakeEffect",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{attrs:{flex:"dir:top main:center"}},[a("span",{class:n.IsTakeEffect?"":"text-green"},[e._v(e._s(n.IsTakeEffect?"禁止预约":"已解禁"))]),n.IsTakeEffect&&!n.IsForever&&n.BanToDateTime?a("span",[e._v("剩余时间")]):e._e(),n.IsTakeEffect&&!n.IsForever&&n.BanToDateTime?a("span",[e._v("（"),a("span",{staticClass:"text-red"},[e._v(e._s(e._f("distantTime")(n.BanToDateTime)))]),e._v("）")]):e._e()])]}}])}),a("el-table-column",{directives:[{name:"permission",rawName:"v-permission",value:"detail",expression:"'detail'"}],attrs:{slot:"operate",label:"操作",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"detail",expression:"'detail'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleDetail(n)}}},[e._v("查看")])]}}])})],1)],1)},r=[],i=(a("7db0"),a("a15b"),a("d81d"),a("d3b7"),a("5530")),o=a("2f62"),s=a("f37d"),l=a("ed08"),c={name:"OtherViolations",components:{TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))},DateRangePicker:function(){return a.e("chunk-2d210a9a").then(a.bind(null,"b99f"))}},data:function(){var e=this;return{mainRoles:"",bannedCount:0,searchForm:{time:[],degree:"",search_key:""},degreeOptions:[{value:0,label:"普通违纪"},{value:1,label:"严重违纪"},{value:2,label:"特别严重违纪"}],columns:[{title:"姓名",key:"UserName",align:"center",minWidth:80},{title:"性别",key:"Gender",align:"center",minWidth:60,formatter:function(e,t,a,n){var r="";switch(e.Gender){case 0:r="女";break;case 1:r="男";break;case 2:r="保密";break}return r}},{title:"证件号码",key:"IDCardNum",align:"center",minWidth:140},{title:"鉴定工种/等级/方向",key:"ProfessionNames",headerAlign:"center",minWidth:250,formatter:function(e,t,a,n){return e.ProfessionNames.join("-")}},{title:"考试科目",key:"PlanType",align:"center",formatter:function(e,t,a,n){return e.PlanType?"技能":"理论"}},{title:"违纪程度",key:"ViolationLevel",align:"center",formatter:function(t,a,n,r){if("undefined"!==typeof t.ViolationLevel)return e.degreeOptions.find((function(e){return e.value===t.ViolationLevel})).label}},{title:"违纪内容",key:"ViolationContent",align:"center"},{title:"违纪时间",key:"CreateDate",align:"center",minWidth:130,formatter:function(e,t,a,n){return Object(l["e"])(e.CreateDate)||"-"}},{title:"处理结果",key:"PunishResult",headerAlign:"center",minWidth:200},{title:"禁考状态",key:"IsTakeEffect",slot:"IsTakeEffect"}],indexRow:{title:"序号",align:"center",width:60},tableLoading:!1,tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0}}},computed:Object(i["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.mainRoles=this.$store.getters.mainRoles,this.doLoad()},methods:{doLoad:function(){this.doRefresh()},doRefresh:function(){var e=this;this.mainRoles=this.$store.getters.mainRoles;var t=this.pagination,a=t.currentPage,n=t.pageSize,r=this.searchForm,o=r.time,l=r.degree,c=r.search_key,d={dateStart:o.length?o[0]:"",dateEnd:o.length?o[1]:"",kw:c||"",violationType:""===l?-1:l,isInSincerity:!1,pageIndex:a,pageSize:n};console.log(d),this.tableLoading=!0,Object(s["d"])(d).then((function(t){if(e.tableLoading=!1,t.success){var a=t.response,n=[];a.data.length&&(n=a.data.map((function(e){return e.ProfessionNames=[e.Work,e.Grade,e.Direction],Object(i["a"])(Object(i["a"])(Object(i["a"])({},e),e.Student),e.ViolationDetail)}))),e.tableData=n,e.pagination.total=a.dataCount,e.bannedCount=a.DurNotExamCount}})).catch((function(t){e.tableLoading=!1}))},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()},searchFormSubmit:function(){this.pagination.currentPage=1,this.doRefresh()},searchFormReset:function(e){this.searchForm={time:[],degree:"",search_key:""},this.searchFormSubmit()},handleDetail:function(e){this.$router.push({name:"OtherViolationsDetail",params:{id:e.OrderID}})}}},d=c,u=a("2877"),h=Object(u["a"])(d,n,r,!1,null,null,null);t["default"]=h.exports},f37d:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"h",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return u}));var n=a("b775");function r(e){return Object(n["a"])({url:"api/BadRecord/GetViolationDiscipline",method:"get",params:e})}function i(e){return Object(n["a"])({url:"api/BadRecord/UpdateViolationDiscipline",method:"post",data:e})}function o(e){return Object(n["a"])({url:"api/BadRecord/GetFalseDeclaration",method:"get",params:e})}function s(e){return Object(n["a"])({url:"api/BadRecord/UpdateFalseDeclaration",method:"post",data:e})}function l(e){return Object(n["a"])({url:"api/BadRecord/GetExamAbsent",method:"get",params:e})}function c(e){return Object(n["a"])({url:"api/BadRecord/UpdateExamAbsent",method:"post",data:e})}function d(e){return Object(n["a"])({url:"api/BadRecord/GetPunishRecordList",method:"get",params:e})}function u(e){return Object(n["a"])({url:"api/BadRecord/GetMissRecordList",method:"get",params:e})}}}]);