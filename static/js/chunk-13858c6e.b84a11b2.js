(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13858c6e"],{"13a0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[n("bar",{attrs:{slot:"title"},slot:"title"},[n("bar-space"),n("bar-cell",[n("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:e.doRefresh}},[e._v("刷新")])],1),n("bar-cell",[e.showBtnCreate?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}],attrs:{icon:"el-icon-plus",size:e.tableSize,type:"primary"},on:{click:e.handleCreate}},[e._v("添加督导计划")]):e._e()],1)],1),n("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("AreaSelect",{attrs:{"area-label":"督导省份","show-city":!1,"province-code":e.searchForm.provinceID},on:{areaSelectChange:e.searchFormAreaChange}}),n("el-form-item",{attrs:{label:"发布状态"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.isPublish,callback:function(t){e.$set(e.searchForm,"isPublish",t)},expression:"searchForm.isPublish"}},[n("el-option",{attrs:{label:"未发布",value:0}}),n("el-option",{attrs:{label:"已发布",value:1}})],1)],1),n("el-form-item",{attrs:{label:"计划状态"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[n("el-option",{attrs:{label:"未开始",value:0}}),n("el-option",{attrs:{label:"进行中",value:1}}),n("el-option",{attrs:{label:"已取消",value:2}}),n("el-option",{attrs:{label:"已结束",value:3}})],1)],1),n("el-form-item",{attrs:{label:"日期范围"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),n("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入督导员姓名",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),n("el-form-item",{attrs:{label:"操作"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFromSubmit}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),n("table-body",{ref:"mkTable",attrs:{"index-row":e.indexRow,loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[n("el-table-column",{attrs:{slot:"SupervisionTime",label:"督导时间",align:"center","min-width":"140px"},slot:"SupervisionTime",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(e._f("parseTime")(a.BeginDate))+" - "+e._s(e._f("parseTime")(a.EndDate)))])]}}])}),n("el-table-column",{attrs:{slot:"IsPublish",label:"发布状态",align:"center","min-width":"50px"},slot:"IsPublish",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.IsPublish?n("span",{staticClass:"text-green"},[e._v("已发布")]):e._e(),a.IsPublish?e._e():n("span",{staticClass:"text-red"},[e._v("待发布")])]}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.showBtnPublish(a)?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"publish",expression:"'publish'"}],attrs:{type:"success"},on:{click:function(t){return e.handlePublish(a)}}},[e._v("发布")]):e._e(),e.showBtnEdit(a)?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"edit",expression:"'edit'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("修改")]):e._e(),e.showBtnDetail(a)?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"detail",expression:"'detail'"}],attrs:{type:"primary"},on:{click:function(t){return e.handleDetail(a)}}},[e._v("查看")]):e._e(),e.showBtnCancel(a)?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"cancel",expression:"'cancel'"}],attrs:{type:"danger"},on:{click:function(t){return e.handleCancel(a)}}},[e._v("取消")]):e._e()]}}])})],1)],1)},r=[],i=(n("caad"),n("d3b7"),n("5530")),o=n("2f62"),s=n("37d6"),l=(n("a15b"),n("ed08")),u={data:function(){return{roles:"",searchPanelActive:!0,searchForm:{provinceID:null,time:[],isPublish:"",status:"",search_key:""},columns:[{title:"督导省份",key:"ProvinceName",align:"center"},{title:"督导站点",key:"SiteNames",align:"center",formatter:function(e,t,n,a){var r="";return e.SiteNames&&(r=e.SiteNames.join("、")),r}},{title:"督导时间",key:"SupervisionTime",slot:"SupervisionTime"},{title:"督导员",key:"Supervisor",align:"center"},{title:"督导方式",key:"TypeName",align:"center"},{title:"发布时间",key:"PublishDate",align:"center",formatter:function(e,t,n,a){return Object(l["e"])(e.PublishDate)}},{title:"发布人",key:"PublishUser",align:"center"},{title:"发布状态",key:"IsPublish",slot:"IsPublish"},{title:"计划状态",key:"StatusName",align:"center"}],indexRow:{title:"序号",align:"center",width:60},tableLoading:!1,tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:1}}}},c={name:"SupervisionArrangements",components:{AreaSelect:function(){return n.e("chunk-1bcfd332").then(n.bind(null,"a92d"))},Bar:function(){return n.e("chunk-2d0bac10").then(n.bind(null,"390d"))},BarCell:function(){return n.e("chunk-2d221e17").then(n.bind(null,"cbdf"))},BarSpace:function(){return n.e("chunk-2d2218de").then(n.bind(null,"cb9b"))},SearchPanel:function(){return n.e("chunk-c808d2de").then(n.bind(null,"978e"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))}},mixins:[u],computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),{},{showBtnCreate:function(){var e=!1;return"Guidance"===this.roles&&(e=!0),e}}),created:function(){this.doLoad()},methods:{doRefresh:function(){var e=this;this.roles=this.$store.getters.mainRoles;var t=this.pagination,n=t.currentPage,a=t.pageSize,r=this.searchForm,i=r.provinceID,o=r.time,l=r.isPublish,u=r.status,c=r.search_key,h={provinceID:null===i?-1:i,bd:o.length?o[0]:"",ed:o.length?o[1]:"",keyword:c,isPublish:""===l?-1:l,status:""===u?-1:u,PageIndex:n,PageSize:a};this.tableLoading=!0,Object(s["q"])(h).then((function(t){t.success&&(e.tableData=t.data,e.pagination.total=t.dataCount,e.tableLoading=!1)})).catch((function(t){e.tableLoading=!1}))},doLoad:function(){this.doRefresh()},searchFromSubmit:function(){this.doRefresh()},searchFormReset:function(){this.searchForm={provinceID:null,time:[],isPublish:"",status:"",search_key:""},this.doRefresh()},searchFormAreaChange:function(e){this.searchForm.provinceID=e.provinceCode},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()},showBtnPublish:function(e){var t=!1;return"Guidance"===this.roles&&(e.IsPublish||(t=!0)),t},showBtnEdit:function(e){var t=!1;return"Guidance"===this.roles&&(e.IsPublish||(t=!0)),t},showBtnCancel:function(e){var t=!1;return"Guidance"===this.roles&&(0!==e.Status&&e.IsPublish||(t=!0)),t},showBtnDetail:function(e){var t=!1,n=["Guidance","Department"];return n.includes(this.roles)&&e.IsPublish&&(t=!0),t},handleEdit:function(e){this.$router.push({name:"EditSupervisionPlan",params:{id:e.PlanID}})},handleDetail:function(e){this.$router.push({name:"SupervisionPlanDetail",params:{id:e.PlanID}})},handleCreate:function(){this.$router.push({name:"CreateSupervisionPlan"})},handleCancel:function(e){var t=this;this.$confirm("确定取消督导计划吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={PlanID:e.PlanID};Object(s["b"])(n).then((function(e){e.success&&(t.doRefresh(),t.$message({type:"success",message:"取消成功！系统已自动通知督导员"}))}))}))},handlePublish:function(e){var t=this;this.$confirm("确定发布督导计划吗？计划发布后将不能修改","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={PlanID:e.PlanID};Object(s["s"])(n).then((function(e){e.success&&(t.doRefresh(),t.$message({type:"success",message:"发布成功！系统已自动通知督导员"}))}))}))}}},h=c,d=n("2877"),m=Object(d["a"])(h,a,r,!1,null,null,null);t["default"]=m.exports},"37d6":function(e,t,n){"use strict";n.d(t,"o",(function(){return r})),n.d(t,"n",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"z",(function(){return c})),n.d(t,"r",(function(){return h})),n.d(t,"l",(function(){return d})),n.d(t,"y",(function(){return m})),n.d(t,"v",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return v})),n.d(t,"w",(function(){return k})),n.d(t,"u",(function(){return g})),n.d(t,"g",(function(){return x})),n.d(t,"t",(function(){return P})),n.d(t,"d",(function(){return S})),n.d(t,"j",(function(){return y})),n.d(t,"i",(function(){return E})),n.d(t,"q",(function(){return O})),n.d(t,"p",(function(){return w})),n.d(t,"x",(function(){return j})),n.d(t,"s",(function(){return _})),n.d(t,"b",(function(){return D}));var a=n("b775");function r(e){return Object(a["a"])({url:"api/ExamWork/GetSupervisonrList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"api/ExamWork/GetSupervisor",method:"get",params:e})}function o(e){return Object(a["a"])({url:"api/Sys/CheckUserInfo",method:"get",noNoticeError:!0,params:e})}function s(e){return Object(a["a"])({url:"api/ExamWork/AddSupervisor",method:"post",data:e})}function l(e){return Object(a["a"])({url:"api/ExamWork/DisableSupervisorInfo",method:"get",params:e})}function u(e){return Object(a["a"])({url:"api/ExamWork/EnableSupervisorInfo",method:"get",params:e})}function c(e){return Object(a["a"])({url:"api/ExamWork/UpdateSupervisor",method:"post",data:e})}function h(e){return Object(a["a"])({url:"api/ExamWork/TheoryExaminationPlans",method:"get",params:e})}function d(e){return Object(a["a"])({url:"api/ExamWork/LoadTheoryExaminationPlan",method:"get",params:e})}function m(e){return Object(a["a"])({url:"api/ExamWork/SaveTheoryExaminationPlan",method:"post",data:e})}function p(e){return Object(a["a"])({url:"api/ExamWork/SaveBatchTheoryPlan",method:"post",useJSON:!0,data:e})}function f(e){return Object(a["a"])({url:"api/ExamWork/GenerateBatchTheoryPlan",method:"post",data:e})}function b(e){return Object(a["a"])({url:"api/ExamWork/SkillsExaminationPlans",method:"get",params:e})}function v(e){return Object(a["a"])({url:"api/ExamWork/LoadSkillsExaminationPlan",method:"get",params:e})}function k(e){return Object(a["a"])({url:"api/ExamWork/SaveSkillsExaminationPlan",method:"post",data:e})}function g(e){return Object(a["a"])({url:"api/ExamWork/SaveBatchSkillsPlan",method:"post",useJSON:!0,data:e})}function x(e){return Object(a["a"])({url:"api/ExamWork/GenerateBatchSkillsPlan",method:"post",data:e})}function P(e){return Object(a["a"])({url:"api/ExamWork/ReleaseExamPlans",method:"post",data:e})}function S(e){return Object(a["a"])({url:"api/ExamWork/DeleteExamPlans",method:"post",data:e})}function y(e){return Object(a["a"])({url:"api/ExamWork/GetExamPlanOrderedDetail",method:"get",params:e})}function E(e){return Object(a["a"])({url:"api/ExamWork/GetExamPlanForSupervisionPlan",method:"get",params:e})}function O(e){return Object(a["a"])({url:"api/ExamWork/GetSupervissionPlanList",method:"get",params:e})}function w(e){return Object(a["a"])({url:"api/ExamWork/GetSupervissionPlanDetail",method:"get",params:e})}function j(e){return Object(a["a"])({url:"api/ExamWork/SaveSupervissionPlan",method:"post",data:e})}function _(e){return Object(a["a"])({url:"api/ExamWork/PublishSupervissionPlan",method:"post",useJSON:!0,data:e})}function D(e){return Object(a["a"])({url:"api/ExamWork/CancelSupervissionPlan",method:"post",useJSON:!0,data:e})}}}]);