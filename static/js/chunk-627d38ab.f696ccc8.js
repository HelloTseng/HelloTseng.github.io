(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-627d38ab"],{2934:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"j",(function(){return o})),r.d(e,"g",(function(){return i})),r.d(e,"e",(function(){return l})),r.d(e,"i",(function(){return u})),r.d(e,"k",(function(){return s})),r.d(e,"f",(function(){return c})),r.d(e,"h",(function(){return f})),r.d(e,"b",(function(){return m})),r.d(e,"c",(function(){return d})),r.d(e,"n",(function(){return p})),r.d(e,"m",(function(){return b})),r.d(e,"l",(function(){return h})),r.d(e,"d",(function(){return g}));var a=r("b775");function n(t){return Object(a["a"])({url:"api/Sys/CheckUserInfo",method:"get",noNoticeError:!0,params:t})}function o(t){return Object(a["a"])({url:"api/Sys/GetSelRoleList",method:"get",params:t})}function i(t){return Object(a["a"])({url:"api/Sys/GetEnableProfessionnalTitles",method:"get",params:t})}function l(t){return Object(a["a"])({url:"api/Sys/GetEnableExaminerProfessionnalTitles",method:"get",params:t})}function u(t){return Object(a["a"])({url:"api/Global/GetRegionList",method:"get",params:t})}function s(t){return Object(a["a"])({url:"api/Station/GetSelSites",method:"get",params:t})}function c(t){return Object(a["a"])({url:"api/Sys/EnableProfessionList",method:"get",params:t})}function f(t){return Object(a["a"])({url:"api/Examination/LoadQuestionBankOptions",method:"get",params:t})}function m(t){return Object(a["a"])({url:"api/Sys/GetEnableEQLanguages",method:"get",params:t})}function d(t){return Object(a["a"])({url:"api/Station/EnableExamRoomLst",method:"get",params:t})}function p(t){return Object(a["a"])({url:"images/Upload/TempPic",method:"post",data:t,multiple:!0})}function b(t){return Object(a["a"])({url:"images/Upload/TempFile",method:"post",data:t,multiple:!0})}function h(t){return Object(a["a"])({url:"api/images/Upload/NewPic",method:"post",data:t,multiple:!0})}function g(t){return Object(a["a"])({url:"api/Station/EnableExaminerInfos",method:"get",params:t})}},"600f":function(t,e,r){"use strict";var a=r("8e15"),n=r.n(a);n.a},"8e15":function(t,e,r){},ca42:function(t,e,r){"use strict";r.d(e,"p",(function(){return n})),r.d(e,"m",(function(){return o})),r.d(e,"s",(function(){return i})),r.d(e,"q",(function(){return l})),r.d(e,"r",(function(){return u})),r.d(e,"y",(function(){return s})),r.d(e,"w",(function(){return c})),r.d(e,"x",(function(){return f})),r.d(e,"B",(function(){return m})),r.d(e,"k",(function(){return d})),r.d(e,"g",(function(){return p})),r.d(e,"b",(function(){return b})),r.d(e,"u",(function(){return h})),r.d(e,"v",(function(){return g})),r.d(e,"A",(function(){return x})),r.d(e,"j",(function(){return v})),r.d(e,"f",(function(){return k})),r.d(e,"l",(function(){return y})),r.d(e,"i",(function(){return T})),r.d(e,"e",(function(){return E})),r.d(e,"a",(function(){return R})),r.d(e,"n",(function(){return C})),r.d(e,"o",(function(){return D})),r.d(e,"z",(function(){return P})),r.d(e,"h",(function(){return j})),r.d(e,"d",(function(){return O})),r.d(e,"c",(function(){return V})),r.d(e,"t",(function(){return S}));var a=r("b775");function n(t){return Object(a["a"])({url:"api/Enroll/GetEnrolExamineelList",method:"get",params:t})}function o(t){return Object(a["a"])({url:"api/Enroll/GetAppointmentExamineelList",method:"get",params:t})}function i(t){return Object(a["a"])({url:"api/Enroll/GetEnrollFieldList",method:"get",params:t})}function l(t){return Object(a["a"])({url:"api/Enroll/GetEnrollField",method:"get",params:t})}function u(t){return Object(a["a"])({url:"api/Enroll/GetEnrollFieldDetails",method:"get",params:t})}function s(t){return Object(a["a"])({url:"api/Enroll/GetRegisterSettingList",method:"get",params:t})}function c(t){return Object(a["a"])({url:"api/Enroll/GetRegisterSetting",method:"get",params:t})}function f(t){return Object(a["a"])({url:"api/Enroll/GetRegisterSettingDetails",method:"get",params:t})}function m(t){return Object(a["a"])({url:"api/Enroll/UpdateRegisterSetting",method:"post",data:t})}function d(t){return Object(a["a"])({url:"api/Enroll/EnableRegisterSetting",method:"post",data:t})}function p(t){return Object(a["a"])({url:"api/Enroll/DisableRegisterSetting",method:"post",data:t})}function b(t){return Object(a["a"])({url:"api/Enroll/AddRegisterConditions",method:"post",data:t})}function h(t){return Object(a["a"])({url:"api/Enroll/GetRegisterConditions",method:"get",params:t})}function g(t){return Object(a["a"])({url:"api/Enroll/GetRegisterConditionsList",method:"get",params:t})}function x(t){return Object(a["a"])({url:"api/Enroll/UpdateRegisterConditions",method:"post",data:t})}function v(t){return Object(a["a"])({url:"api/Enroll/EnableRegisterConditions",method:"post",data:t})}function k(t){return Object(a["a"])({url:"api/Enroll/DisableRegisterConditions",method:"post",data:t})}function y(t){return Object(a["a"])({url:"api/Enroll/GetRegisterAutoAuditList",method:"get",params:t})}function T(t){return Object(a["a"])({url:"api/Enroll/EnableRegisterAutoAudit",method:"post",data:t})}function E(t){return Object(a["a"])({url:"api/Enroll/DisableRegisterAutoAudit",method:"post",data:t})}function R(t){return Object(a["a"])({url:"api/Enroll/AddAuditTaskConfig",method:"post",data:t})}function C(t){return Object(a["a"])({url:"api/Enroll/GetAuditTaskConfig",method:"get",params:t})}function D(t){return Object(a["a"])({url:"api/Enroll/GetAuditTaskConfigList",method:"get",params:t})}function P(t){return Object(a["a"])({url:"api/Enroll/UpdateAuditTaskConfig",method:"post",data:t})}function j(t){return Object(a["a"])({url:"api/Enroll/EnableAuditTaskConfig",method:"post",data:t})}function O(t){return Object(a["a"])({url:"api/Enroll/DisableAuditTaskConfig",method:"post",data:t})}function V(t){return Object(a["a"])({url:"api/Enroll/DeleteAuditTaskConfig",method:"post",data:t})}function S(t){return Object(a["a"])({url:"api/Enroll/GetEnrollInfo",method:"get",params:t})}},ece2:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-position":"right","label-width":"150px"}},[r("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[r("bar-space"),r("bar-cell",[r("el-button",{on:{click:t.goBack}},[t._v("返回")])],1),r("bar-cell",[r("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1)],1),r("div",{staticClass:"app-container"},[r("el-form-item",{attrs:{label:"应用工种："}},[r("el-radio-group",{model:{value:t.form.WorkCID,callback:function(e){t.$set(t.form,"WorkCID",e)},expression:"form.WorkCID"}},t._l(t.workList,(function(e){return r("el-radio",{key:e.ProfessionID,attrs:{label:e.ProfessionID}},[t._v(t._s(e.ProfessionName))])})),1)],1),r("el-form-item",{attrs:{label:"任务名称：",prop:"taskName"}},[r("el-input",{model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName","string"===typeof e?e.trim():e)},expression:"form.taskName"}})],1),r("el-form",{ref:"form2",staticClass:"demo-form-inline",attrs:{model:t.form2,rules:t.formRules2,inline:!0}},[r("el-form-item",{attrs:{label:"抽调范围：","label-width":"150px"}}),r("el-form-item",{attrs:{label:"最近",prop:"extractionRangeValue"}},[r("el-input",{attrs:{type:"number",min:0,placeholder:"填入数值"},model:{value:t.form2.extractionRangeValue,callback:function(e){t.$set(t.form2,"extractionRangeValue",e)},expression:"form2.extractionRangeValue"}})],1),r("el-form-item",[r("el-select",{attrs:{placeholder:"抽调范围类型"},model:{value:t.form2.extractionRangeType,callback:function(e){t.$set(t.form2,"extractionRangeType",e)},expression:"form2.extractionRangeType"}},[r("el-option",{attrs:{label:"天",value:2}}),r("el-option",{attrs:{label:"月",value:1}}),r("el-option",{attrs:{label:"年",value:0}})],1)],1)],1),r("el-form-item",{attrs:{label:"考生状态"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.examineeCurrentStatus,callback:function(e){t.$set(t.form,"examineeCurrentStatus",e)},expression:"form.examineeCurrentStatus"}},[r("el-option",{attrs:{label:"未鉴定",value:0}}),r("el-option",{attrs:{label:"鉴定中",value:1}}),r("el-option",{attrs:{label:"鉴定完毕",value:2}}),r("el-option",{attrs:{label:"待发证",value:3}}),r("el-option",{attrs:{label:"发证中",value:4}}),r("el-option",{attrs:{label:"已发证",value:5}})],1)],1),r("el-form-item",{attrs:{label:"抽调比例"}},[r("el-radio-group",{model:{value:t.form.extractionType,callback:function(e){t.$set(t.form,"extractionType",e)},expression:"form.extractionType"}},[r("el-radio",{attrs:{label:0}},[t._v("不限")]),r("el-radio",{attrs:{label:1}},[t._v("按技能等级")])],1)],1),r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"抽调比例设置：","label-width":"150px"}}),0===t.form.extractionType?r("el-form-item",{attrs:{prop:"check"}},[r("el-table",{attrs:{data:t.tableData1,border:""}},[r("el-table-column",{attrs:{label:"技能等级",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.level))])]}}],null,!1,2197256592)}),r("el-table-column",{attrs:{width:"200",label:"比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{display:"flex"}},[r("el-input",{attrs:{type:"number",placeholder:"输入数值"},model:{value:e.row.value,callback:function(r){t.$set(e.row,"value","string"===typeof r?r.trim():r)},expression:"scope.row.value"}}),r("span",{staticStyle:{"line-height":"40px","margin-left":"10px"}},[t._v("%")])],1)]}}],null,!1,3408700301)})],1),t.valid3?t._e():r("div",{staticClass:"error"},[t._v("请输入抽调比例值")])],1):t._e(),1===t.form.extractionType?r("el-form-item",[r("el-table",{attrs:{data:t.tableData2,border:""}},[r("el-table-column",{attrs:{label:"技能等级",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.level))])]}}],null,!1,2197256592)}),r("el-table-column",{attrs:{width:"200",label:"比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{display:"flex"}},[r("el-input",{attrs:{type:"number",placeholder:"输入数值"},model:{value:e.row.value,callback:function(r){t.$set(e.row,"value","string"===typeof r?r.trim():r)},expression:"scope.row.value"}}),r("span",{staticStyle:{"line-height":"40px","margin-left":"10px"}},[t._v("%")])],1)]}}],null,!1,3408700301)})],1),t.valid4?t._e():r("div",{staticClass:"error"},[t._v("请输入抽调比例值")])],1):t._e()],1),r("el-form",{ref:"form3",staticClass:"demo-form-inline",attrs:{model:t.form3,rules:t.formRules3,inline:!0}},[r("el-form-item",{attrs:{label:"抽调周期：","label-width":"150px"}}),r("el-form-item",[r("el-select",{attrs:{placeholder:"抽调范围类型"},on:{change:t.handleChangeExtractionPeriodType},model:{value:t.form3.extractionPeriodType,callback:function(e){t.$set(t.form3,"extractionPeriodType",e)},expression:"form3.extractionPeriodType"}},[r("el-option",{attrs:{label:"按天",value:0}}),r("el-option",{attrs:{label:"按周",value:1}}),r("el-option",{attrs:{label:"按月",value:2}})],1)],1),0===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"每",prop:"extractionPeriodValue"}},[r("el-input",{attrs:{type:"number",placeholder:"填入数值"},model:{value:t.form3.extractionPeriodValue,callback:function(e){t.$set(t.form3,"extractionPeriodValue","string"===typeof e?e.trim():e)},expression:"form3.extractionPeriodValue"}})],1):t._e(),0===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"天，生成一次"}}):t._e(),1===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"每周",prop:"extractionPeriodValue"}},[r("el-input",{attrs:{type:"number",placeholder:"填入数值"},model:{value:t.form3.extractionPeriodValue,callback:function(e){t.$set(t.form3,"extractionPeriodValue","string"===typeof e?e.trim():e)},expression:"form3.extractionPeriodValue"}})],1):t._e(),1===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"生成一次"}}):t._e(),2===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"每月"}}):t._e(),2===t.form3.extractionPeriodType?r("el-form-item",[r("el-select",{attrs:{placeholder:"抽调范围类型"},model:{value:t.form3.extractionPeriodValue,callback:function(e){t.$set(t.form3,"extractionPeriodValue",e)},expression:"form3.extractionPeriodValue"}},[r("el-option",{attrs:{label:"上旬(1号)",value:1}}),r("el-option",{attrs:{label:"中旬(15号)",value:15}}),r("el-option",{attrs:{label:"下旬(最后一天)",value:0}})],1)],1):t._e(),2===t.form3.extractionPeriodType?r("el-form-item",{attrs:{label:"生成一次"}}):t._e()],1),r("el-form-item",{attrs:{label:"审核地点"}},[r("el-radio-group",{model:{value:t.form.auditLocation,callback:function(e){t.$set(t.form,"auditLocation",e)},expression:"form.auditLocation"}},[r("el-radio",{attrs:{label:0}},[t._v("鉴定站")]),r("el-radio",{attrs:{label:1}},[t._v("全省鉴定站点")])],1)],1),r("el-form-item",{attrs:{label:"任务开始执行时间：",prop:"taskDate"}},[r("el-input",{attrs:{placeholder:"yyyy/MM/dd"},model:{value:t.form.taskDate,callback:function(e){t.$set(t.form,"taskDate","string"===typeof e?e.trim():e)},expression:"form.taskDate"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("el-radio",{attrs:{label:!0}},[t._v("启用")]),r("el-radio",{attrs:{label:!1}},[t._v("停用")])],1)],1)],1)],1)],1)},n=[],o=(r("7db0"),r("4160"),r("45fc"),r("a9e3"),r("d3b7"),r("ac1f"),r("1276"),r("498a"),r("159b"),r("96cf"),r("1da1")),i=r("2934"),l=r("ca42"),u=!1,s=!1,c=!1,f={name:"AuditManagementTaskEdit",components:{BarCell:function(){return r.e("chunk-2d221e17").then(r.bind(null,"cbdf"))},BarSpace:function(){return r.e("chunk-2d2218de").then(r.bind(null,"cb9b"))},Sticky:function(){return r.e("chunk-2d210590").then(r.bind(null,"b804"))}},data:function(){return{ATCID:-1,workList:[],form:{WorkCID:"",taskName:"",examineeCurrentStatus:0,extractionType:0,extractionRatioValue:"",auditLocation:0,taskDate:"",status:!0},form2:{extractionRangeValue:"",extractionRangeType:2},form3:{extractionPeriodType:0,extractionPeriodValue:""},formRules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],taskDate:[{required:!0,message:"请输入任务开始执行时间",trigger:"blur"}]},formRules2:{extractionRangeValue:[{required:!0,message:"请输入抽调范围值",trigger:"blur"}]},formRules3:{extractionPeriodValue:[{required:!0,message:"请输入抽调周期值",trigger:"blur"}]},tableData1:[{level:"全部",value:""}],tableData2:[{level:"五级/初级",value:""},{level:"四级/中级",value:""},{level:"三级/高级",value:""},{level:"二级/技师",value:""},{level:"一级/高级技师",value:""}],valid3:!0,valid4:!0}},created:function(){var t=this,e=this.$route.params,r=e.ATCID,a=e.WorkCID;function n(){return i.apply(this,arguments)}function i(){return i=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t.ATCID){e.next=3;break}return e.next=3,t.reqForGetAuditTaskConfig();case 3:return e.next=5,t.reqForGetEnableProfessionList();case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}this.ATCID=Number(r),this.form.WorkCID=Number(a),-1===this.ATCID?this.$route.meta.title="新增任务":this.$route.meta.title="编辑任务",n()},methods:{reqForGetAuditTaskConfig:function(){var t=this;return new Promise((function(e,r){Object(l["n"])({cateId:t.ATCID}).then((function(r){var a=r.response,n=a.AuditLocation,o=a.ExamineeCurrentStatus,i=a.ExtractionPeriodType,l=a.ExtractionPeriodValue,u=a.ExtractionRangeType,s=a.ExtractionRangeValue,c=a.ExtractionRatioValue,f=a.ExtractionType,m=a.Status,d=a.TaskDate,p=a.TaskName;if(t.form.taskName=p,t.form.examineeCurrentStatus=o,t.form.extractionType=f,t.form.extractionRatioValue=c,0===f)t.tableData1=[{level:"全部",value:c}];else if(1===f){var b=c.split("|");t.tableData2.forEach((function(t,e){t.value=b[e]}))}t.form.auditLocation=n,t.form.taskDate=d,t.form.status=m,t.form2.extractionRangeValue=s,t.form2.extractionRangeType=u,t.form3.extractionPeriodType=i,t.form3.extractionPeriodValue=l,e()}))}))},reqForGetEnableProfessionList:function(){var t=this;return new Promise((function(e,r){Object(i["f"])().then((function(r){if(t.workList=r.response,-1===t.ATCID)t.form.WorkCID=r.response[0].ProfessionID;else{var a=r.response.find((function(e){return e.ProfessionID===Number(t.form.WorkCID)}));t.form.WorkCID=a.ProfessionID}e()}))}))},reqForAddAuditTaskConfig:function(){var t=this,e=this.form,r=e.WorkCID,a=e.auditLocation,n=e.examineeCurrentStatus,o=e.extractionType,i=e.status,u=e.taskDate,s=e.taskName,c=this.form2,f=c.extractionRangeValue,m=c.extractionRangeType,d=this.form3,p=d.extractionPeriodType,b=d.extractionPeriodValue,h=this.tableData1,g=this.tableData2;return this.form.extractionRatioValue="",0===o?this.form.extractionRatioValue=h[0].value:1===o&&g.forEach((function(e,r){t.form.extractionRatioValue+=e.value,r!==g.length-1&&(t.form.extractionRatioValue+="|")})),new Promise((function(e,c){-1===t.ATCID?Object(l["a"])({workCID:r,taskName:s,examineeCurrentStatus:n,extractionRangeType:m,extractionRangeValue:f,extractionType:o,extractionRatioValue:t.form.extractionRatioValue,extractionPeriodType:p,extractionPeriodValue:b,auditLocation:a,taskDate:u,status:i}).then((function(){t.$notify({title:"成功",message:"创建任务成功",type:"success"}),t.$router.go(-1),e()})):Object(l["z"])({atcid:t.ATCID,workCID:r,taskName:s,examineeCurrentStatus:n,extractionRangeType:m,extractionRangeValue:f,extractionType:o,extractionRatioValue:t.form.extractionRatioValue,extractionPeriodType:p,extractionPeriodValue:b,auditLocation:a,taskDate:u,status:i}).then((function(){t.$notify({title:"成功",message:"修改任务成功",type:"success"}),t.$router.go(-1),e()}))}))},goBack:function(){this.$router.go(-1)},handleChangeExtractionPeriodType:function(t){this.form3.extractionPeriodValue=""},handleSave:function(){var t=this;if(this.$refs.form.validate((function(t){u=t})),this.$refs.form2.validate((function(t){s=t})),this.$refs.form3.validate((function(t){c=t})),0===this.form.extractionType&&""===this.tableData1[0].value.trim()?this.valid3=!1:this.valid3=!0,1===this.form.extractionType){var e=this.tableData2.some((function(t){return""===t.value.trim()}));this.valid4=!e}function r(){return a.apply(this,arguments)}function a(){return a=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reqForAddAuditTaskConfig();case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}u&&s&&this.valid3&&this.valid4&&c?r():this.$message({message:"提交失败",type:"error"})}}},m=f,d=(r("600f"),r("2877")),p=Object(d["a"])(m,a,n,!1,null,"15578c3e",null);e["default"]=p.exports}}]);