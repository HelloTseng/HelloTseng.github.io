(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e6c2aa"],{"37cb":function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"y",(function(){return i})),n.d(t,"r",(function(){return o})),n.d(t,"n",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"M",(function(){return l})),n.d(t,"x",(function(){return d})),n.d(t,"A",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"I",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"E",(function(){return b})),n.d(t,"G",(function(){return g})),n.d(t,"C",(function(){return v})),n.d(t,"p",(function(){return y})),n.d(t,"u",(function(){return S})),n.d(t,"F",(function(){return O})),n.d(t,"B",(function(){return j})),n.d(t,"l",(function(){return w})),n.d(t,"t",(function(){return k})),n.d(t,"a",(function(){return M})),n.d(t,"K",(function(){return x})),n.d(t,"z",(function(){return F})),n.d(t,"d",(function(){return W})),n.d(t,"s",(function(){return B})),n.d(t,"o",(function(){return _})),n.d(t,"N",(function(){return D})),n.d(t,"k",(function(){return C})),n.d(t,"D",(function(){return L})),n.d(t,"f",(function(){return K})),n.d(t,"O",(function(){return I})),n.d(t,"w",(function(){return z})),n.d(t,"b",(function(){return P})),n.d(t,"L",(function(){return T})),n.d(t,"q",(function(){return E})),n.d(t,"m",(function(){return R})),n.d(t,"h",(function(){return $})),n.d(t,"v",(function(){return A})),n.d(t,"H",(function(){return U})),n.d(t,"J",(function(){return G}));var a=n("b775");function r(e){return Object(a["a"])({url:"api/WebManager/DeleteInfo",method:"post",data:e})}function i(e){return Object(a["a"])({url:"api/WebManager/GetKnowledgeBaseList",method:"get",params:e})}function o(e){return Object(a["a"])({url:"api/WebManager/EnableKnowledgeBase",method:"post",data:e})}function c(e){return Object(a["a"])({url:"api/WebManager/DisableKnowledgeBase",method:"post",data:e})}function s(e){return Object(a["a"])({url:"api/WebManager/DeleteKnowledgeBase",method:"post",data:e})}function u(e){return Object(a["a"])({url:"api/WebManager/AddKnowledgeBase",method:"post",data:e})}function l(e){return Object(a["a"])({url:"api/WebManager/UpdateKnowledgeBase",method:"post",data:e})}function d(e){return Object(a["a"])({url:"api/WebManager/GetKnowledgeBase",method:"get",params:e})}function h(e){return Object(a["a"])({url:"api/WebManager/GetManuscriptList",method:"get",params:e})}function p(e){return Object(a["a"])({url:"api/WebManager/ApprovedManuscript",method:"post",useJSON:!0,data:e})}function m(e){return Object(a["a"])({url:"api/WebManager/ManuscriptDelivery",method:"post",data:e})}function f(e){return Object(a["a"])({url:"api/WebManager/AddManuscriptInfo",method:"post",data:e})}function b(e){return Object(a["a"])({url:"api/WebManager/GetSupervisorList",method:"get",params:e})}function g(e){return Object(a["a"])({url:"api/WebManager/UpdateSupervis",method:"get",params:e})}function v(e){return Object(a["a"])({url:"api/WebManager/OrderBySupervis",method:"get",params:e})}function y(e){return Object(a["a"])({url:"api/WebManager/DisableSupervisPublic",method:"post",data:e})}function S(e){return Object(a["a"])({url:"api/WebManager/GetExaminerInfoList",method:"get",params:e})}function O(e){return Object(a["a"])({url:"api/WebManager/UpdateExaminerInfo",method:"get",params:e})}function j(e){return Object(a["a"])({url:"api/WebManager/OrderByExaminerInfo",method:"get",params:e})}function w(e){return Object(a["a"])({url:"api/WebManager/DisableExaminerInfoPublic",method:"post",data:e})}function k(e){return Object(a["a"])({url:"api/WebManager/GetContactUs",method:"get",params:e})}function M(e){return Object(a["a"])({url:"api/WebManager/AddContactUs",method:"post",data:e})}function x(e){return Object(a["a"])({url:"api/WebManager/UpdateContactUs",method:"post",data:e})}function F(e){return Object(a["a"])({url:"api/WebManager/GetLinkList",method:"get",params:e})}function W(e){return Object(a["a"])({url:"api/WebManager/AddLink",method:"post",data:e})}function B(e){return Object(a["a"])({url:"api/WebManager/EnableLink",method:"post",data:e})}function _(e){return Object(a["a"])({url:"api/WebManager/DisableLink",method:"post",data:e})}function D(e){return Object(a["a"])({url:"api/WebManager/UpdateLink",method:"post",data:e})}function C(e){return Object(a["a"])({url:"api/WebManager/DeleteLink",method:"post",data:e})}function L(e){return Object(a["a"])({url:"api/WebManager/GetSiteInfo",method:"get",params:e})}function K(e){return Object(a["a"])({url:"api/WebManager/AddSiteInfo",method:"post",data:e})}function I(e){return Object(a["a"])({url:"api/WebManager/UpdateSiteInfo",method:"post",data:e})}function z(e){return Object(a["a"])({url:"api/WebManager/GetFloatChartList",method:"get",params:e})}function P(e){return Object(a["a"])({url:"api/WebManager/AddFloatChart",method:"post",data:e})}function T(e){return Object(a["a"])({url:"api/WebManager/UpdateFloatChart",method:"post",data:e})}function E(e){return Object(a["a"])({url:"api/WebManager/EnableFloatChart",method:"post",data:e})}function R(e){return Object(a["a"])({url:"api/WebManager/DisableFloatChart",method:"post",data:e})}function $(e){return Object(a["a"])({url:"api/WebManager/DeleteFloatChart",method:"post",data:e})}function A(e){return Object(a["a"])({url:"api/WebManager/GetFloatChart",method:"get",params:e})}function U(e){return Object(a["a"])({url:"api/WebManager/GetUserAgreement",method:"get",params:e})}function G(e){return Object(a["a"])({url:"api/WebManager/SetUserAgreement",method:"post",useJSON:!0,data:e})}},6777:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("search-panel",{model:{value:e.searchPanelActive,callback:function(t){e.searchPanelActive=t},expression:"searchPanelActive"}},[n("bar",{attrs:{slot:"title"},slot:"title"},[n("bar-space"),n("bar-cell",[n("el-button",{attrs:{icon:"el-icon-refresh",size:e.tableSize},on:{click:e.doRefresh}},[e._v("刷新")])],1),n("bar-cell",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}]},[n("el-button",{attrs:{type:"danger",icon:"el-icon-plus",size:e.tableSize},on:{click:function(t){return e.toEditPage({})}}},[e._v("新增文章")])],1)],1),n("el-form",{ref:"searchForm",attrs:{inline:"","label-position":"top",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("el-form-item",{attrs:{label:"状态",prop:"audit_type"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.searchForm.audit_type,callback:function(t){e.$set(e.searchForm,"audit_type",t)},expression:"searchForm.audit_type"}},[n("el-option",{attrs:{label:"启用",value:1}}),n("el-option",{attrs:{label:"停用",value:0}})],1)],1),n("el-form-item",{attrs:{label:"日期范围"}},[n("date-range-picker",{model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),n("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[n("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入文号或者标题关键字",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),n("el-form-item",{attrs:{label:"操作"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),n("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,"selection-row":e.selectionRow,pagination:e.pagination},on:{"selection-change":e.handleSelectionChange,"multi-select-delete":e.batchDelete,"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange},scopedSlots:e._u([{key:"paginationButtons",fn:function(){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"disable",expression:"'disable'"}],attrs:{icon:"el-icon-stopwatch",type:"danger",size:e.tableSize,disabled:e.multiSelectDisabled,plain:""},on:{click:e.batchStop}},[e._v("批量下架")])]},proxy:!0}])},[n("el-table-column",{attrs:{slot:"CreateDate",label:"创建时间",align:"center","min-width":"140"},slot:"CreateDate",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(e._f("parseTime")(a.CreateDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),n("el-table-column",{attrs:{slot:"Status",label:"状态",align:"center","min-width":"60"},slot:"Status",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.Status?n("span",{staticClass:"text-green"},[e._v("已发布")]):n("span",{staticClass:"text-red"},[e._v("下架")])]}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作",width:"140",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index,r=t.row;return[n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"edit",expression:"'edit'"}],on:{click:function(t){return e.toEditPage(r)}}},[e._v("编辑")]),n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],attrs:{type:"danger"},on:{click:function(t){return e.handleDelete(a,r)}}},[e._v("删除")]),r.Status?n("switch-status",{directives:[{name:"permission",rawName:"v-permission",value:"disable",expression:"'disable'"}],attrs:{row:r,str:r.Title,"status-key":"Status","status-str":["发布","下架"]},on:{"on-switch":e.handleSwitch}}):n("switch-status",{directives:[{name:"permission",rawName:"v-permission",value:"enable",expression:"'enable'"}],attrs:{row:r,str:r.Title,"status-key":"Status","status-str":["发布","下架"]},on:{"on-switch":e.handleSwitch}})]}}])})],1)],1)},r=[],i=(n("4160"),n("a434"),n("b64b"),n("d3b7"),n("159b"),n("96cf"),n("1da1")),o=n("5530"),c=n("2f62"),s=n("37cb"),u={name:"DataLibrary",components:{Bar:function(){return n.e("chunk-2d0bac10").then(n.bind(null,"390d"))},BarCell:function(){return n.e("chunk-2d221e17").then(n.bind(null,"cbdf"))},BarSpace:function(){return n.e("chunk-2d2218de").then(n.bind(null,"cb9b"))},SearchPanel:function(){return n.e("chunk-c808d2de").then(n.bind(null,"978e"))},DateRangePicker:function(){return n.e("chunk-2d210a9a").then(n.bind(null,"b99f"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))},SwitchStatus:function(){return n.e("chunk-2d0e9431").then(n.bind(null,"8d7f"))}},data:function(){return{searchPanelActive:!0,searchForm:{time:[],audit_type:"",search_key:""},tableLoading:!1,indexRow:{title:"序号",align:"center"},selectionRow:{align:"center"},columns:[{title:"文章标题",key:"Title",headerAlign:"center","min-width":"500px"},{title:"创建时间",key:"CreateDate",slot:"CreateDate"},{title:"创建人员",key:"CreateUserName",align:"center","min-width":"200px"},{title:"状态",key:"Status",slot:"Status"}],tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0},multipleSelection:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])({tableSize:function(e){return e.settings.tableSize}})),{},{multiSelectDisabled:function(){return!this.tableData.length}}),created:function(){this.doLoad()},methods:{_getKnowledgeBaseList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.tableLoading=!0,n.next=3,Object(s["y"])(e);case 3:a=n.sent,t.tableLoading=!1,t.tableData=a.data,t.pagination=Object(o["a"])(Object(o["a"])({},t.pagination),{},{currentPage:a.page,total:a.dataCount});case 7:case"end":return n.stop()}}),n)})))()},doRefresh:function(){var e={KType:0,status:""===this.searchForm.audit_type?-1:this.searchForm.audit_type,stardate:this.searchForm.time.length?this.searchForm.time[0]:"",enddate:this.searchForm.time.length?this.searchForm.time[1]:"",key:this.searchForm.search_key,PageIndex:this.pagination.currentPage,PageSize:this.pagination.pageSize};this._getKnowledgeBaseList(e)},doLoad:function(){this.doRefresh()},searchFormSubmit:function(){var e={KType:0,status:""===this.searchForm.audit_type?-1:this.searchForm.audit_type,stardate:this.searchForm.time.length?this.searchForm.time[0]:"",enddate:this.searchForm.time.length?this.searchForm.time[1]:"",key:this.searchForm.search_key,PageIndex:1,PageSize:this.pagination.pageSize};this._getKnowledgeBaseList(e)},searchFormReset:function(){this.searchForm={time:[],audit_type:"",search_key:""}},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()},handleSelectionChange:function(e){this.multipleSelection=e},batchDelete:function(e){var t=this;console.log("selection",e),this.$confirm("确定要批量删除这"+e.length+"条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];return e.forEach((function(e){t.push(e.KID)})),Object(s["j"])({KBIds:t})})).then((function(){t.doRefresh(),t.$notify({title:"成功",message:"删除成功!",type:"success"})}))},batchStop:function(){var e=this;null!=this.multipleSelection&&0!==this.multipleSelection.length?this.$confirm("确定要批量停用这"+this.multipleSelection.length+"条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];return e.multipleSelection.forEach((function(e){t.push(e.KID)})),Object(s["n"])({KBIds:t})})).then((function(){e.doRefresh(),e.$notify({title:"成功",message:"停用成功!",type:"success"})})):this.$message({message:"您还未选择数据",type:"warning"})},toEditPage:function(e){var t=0;Object.keys(e).length&&(t=e.KID),console.log("id",t),this.$router.push({name:"DataLibraryEdit",params:{id:t}})},handleSwitch:function(e,t,n,a){var r=this;"confirm"===t?(n.confirmButtonLoading=!0,n.confirmButtonText="提交中...",e.Status?Object(s["n"])({KBIds:[e.KID]}).then((function(t){a(),e.Status=!e.Status,n.confirmButtonLoading=!1,r.$notify({title:"成功",message:"停用成功",type:"success"})})).catch((function(e){n.confirmButtonLoading=!1,a(e)})):Object(s["r"])({KBIds:[e.KID]}).then((function(t){a(),e.Status=!e.Status,n.confirmButtonLoading=!1,r.$notify({title:"成功",message:"启用成功",type:"success"})})).catch((function(e){n.confirmButtonLoading=!1,a(e)}))):a()},handleDelete:function(e,t){var n=this;console.log("row",t);var a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"您确定要 "),a("span",{class:"text-red"},"删除 "),a("i",{class:"text-red"},"【".concat(t.Title,"】")),a("span",null," 吗？")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(a,r,i){"confirm"===a?(r.confirmButtonLoading=!0,r.confirmButtonText="提交中...",Object(s["j"])({KBIds:[t.KID]}).then((function(t){i(),r.confirmButtonLoading=!1,n.$notify({title:"成功",message:t.msg,type:"success"}),n.tableData.splice(e,1)})).catch((function(e){r.confirmButtonLoading=!1,i(e)}))):i()}}).then((function(e){console.log("action",e)}))}}},l=u,d=n("2877"),h=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=h.exports}}]);