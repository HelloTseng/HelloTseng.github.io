(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6012ecf5"],{2934:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"j",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"i",(function(){return c})),n.d(e,"k",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return p})),n.d(e,"n",(function(){return f})),n.d(e,"m",(function(){return h})),n.d(e,"l",(function(){return b})),n.d(e,"d",(function(){return g}));var a=n("b775");function r(t){return Object(a["a"])({url:"api/Sys/CheckUserInfo",method:"get",noNoticeError:!0,params:t})}function i(t){return Object(a["a"])({url:"api/Sys/GetSelRoleList",method:"get",params:t})}function o(t){return Object(a["a"])({url:"api/Sys/GetEnableProfessionnalTitles",method:"get",params:t})}function u(t){return Object(a["a"])({url:"api/Sys/GetEnableExaminerProfessionnalTitles",method:"get",params:t})}function c(t){return Object(a["a"])({url:"api/Global/GetRegionList",method:"get",params:t})}function s(t){return Object(a["a"])({url:"api/Station/GetSelSites",method:"get",params:t})}function l(t){return Object(a["a"])({url:"api/Sys/EnableProfessionList",method:"get",params:t})}function d(t){return Object(a["a"])({url:"api/Examination/LoadQuestionBankOptions",method:"get",params:t})}function m(t){return Object(a["a"])({url:"api/Sys/GetEnableEQLanguages",method:"get",params:t})}function p(t){return Object(a["a"])({url:"api/Station/EnableExamRoomLst",method:"get",params:t})}function f(t){return Object(a["a"])({url:"images/Upload/TempPic",method:"post",data:t,multiple:!0})}function h(t){return Object(a["a"])({url:"images/Upload/TempFile",method:"post",data:t,multiple:!0})}function b(t){return Object(a["a"])({url:"api/images/Upload/NewPic",method:"post",data:t,multiple:!0})}function g(t){return Object(a["a"])({url:"api/Station/EnableExaminerInfos",method:"get",params:t})}},"3f54":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("search-panel",{model:{value:t.searchPanelActive,callback:function(e){t.searchPanelActive=e},expression:"searchPanelActive"}},[n("bar",{attrs:{slot:"title"},slot:"title"},[n("bar-space"),n("bar-cell",[n("el-button",{attrs:{icon:"el-icon-refresh",size:t.tableSize},on:{click:t.doRefresh}},[t._v("刷新")])],1),n("bar-cell",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}]},[n("el-button",{attrs:{type:"danger",size:t.tableSize},on:{click:t.doCreate}},[t._v("新增考场")])],1)],1),"Site"!==t.role?n("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:t.tableSize},model:{value:t.searchForm,callback:function(e){t.searchForm=e},expression:"searchForm"}},["Department"===t.role||"Guidance"===t.role?n("area-select",{attrs:{"area-label":"省份","show-city":!1,"province-code":t.searchForm.ProvinceID},on:{areaSelectChange:t.searchFormAreaChange}}):t._e(),n("el-form-item",{attrs:{label:"鉴定站",prop:"SiteID"}},[n("el-select",{attrs:{disabled:t.selectDisabled,placeholder:t.placeholder},model:{value:t.searchForm.SiteID,callback:function(e){t.$set(t.searchForm,"SiteID",e)},expression:"searchForm.SiteID"}},t._l(t.provinceOptions,(function(t){return n("el-option",{key:t.SiteID,attrs:{label:t.SiteName,value:t.SiteID}})})),1)],1),n("el-form-item",{attrs:{label:"操作"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchFormSubmit}},[t._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.searchFormReset}},[t._v("清空")])],1)],1):t._e()],1),n("table-body",{ref:"mkTable",attrs:{loading:t.tableLoading,columns:t.columns,"table-data":t.tableData,options:t.tableOptions,pagination:t.pagination},on:{"pagination-current-change":t.paginationCurrenChange,"pagination-size-change":t.paginationSizeChange}},[n("el-table-column",{attrs:{slot:"equipment",label:"设备管理",width:"100",align:"center"},slot:"equipment",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-link",[t._v("查看"+t._s(!a))])]}}])}),n("el-table-column",{attrs:{slot:"Status",label:"状态",align:"center","min-width":"60"},slot:"Status",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.Status?n("span",{staticClass:"text-green"},[t._v("启用")]):t._e(),a.Status?t._e():n("span",{staticClass:"text-red"},[t._v("停用")])]}}])}),t.showOperate?n("el-table-column",{attrs:{slot:"operate",label:"操作","min-width":"120",align:"center",fixed:"right"},slot:"operate",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.$index,r=e.row;return[n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"edit",expression:"'edit'"}],attrs:{type:"primary"},on:{click:function(e){return t.handleEdit(r)}}},[t._v("管理")]),r.Status?n("switch-status",{directives:[{name:"permission",rawName:"v-permission",value:"disable",expression:"'disable'"}],attrs:{row:r,str:r.ERName,"status-key":"Status"},on:{"on-switch":t.handleInnerSwitch}}):n("switch-status",{directives:[{name:"permission",rawName:"v-permission",value:"enable",expression:"'enable'"}],attrs:{row:r,str:r.ERName,"status-key":"Status"},on:{"on-switch":t.handleInnerSwitch}}),n("popconfirm-link",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],attrs:{title:"确定要删除"+r.ERName+"吗？"},on:{"do-confirm":function(e){return t.handleDelete(a,r)}}})]}}],null,!1,1373531550)}):t._e()],1)],1)},r=[],i=(n("caad"),n("a434"),n("d3b7"),n("96cf"),n("1da1")),o=n("5530"),u=n("2f62"),c=n("bcb6"),s=n("2934"),l={data:function(){return{role:"",searchPanelActive:!0,searchForm:{ProvinceID:null,SiteID:null},placeholder:"请先选择省份",selectDisabled:!0,provinceOptions:[],tableLoading:!1,columns:[{title:"考场编号",key:"ERNumber",align:"center",minWidth:100},{title:"考场名称",key:"ERName",align:"center",minWidth:140},{title:"考场类型",key:"ERType",align:"center",minWidth:140,formatter:function(t,e,n,a){var r=t.ERType?"技能":"理论";return r+"考场"}},{title:"考位数",key:"SeatCount",align:"center",minWidth:80},{title:"预留考位",key:"ReservedSeatCount",align:"center",minWidth:100},{title:"设备管理",slot:"equipment"},{title:"状态",key:"Status",slot:"Status"}],tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:1}}}},d={name:"RoomIndex",components:{AreaSelect:function(){return n.e("chunk-2d209560").then(n.bind(null,"a92d"))},Bar:function(){return n.e("chunk-2d0bac10").then(n.bind(null,"390d"))},BarCell:function(){return n.e("chunk-2d221e17").then(n.bind(null,"cbdf"))},BarSpace:function(){return n.e("chunk-2d2218de").then(n.bind(null,"cb9b"))},SearchPanel:function(){return n.e("chunk-c808d2de").then(n.bind(null,"978e"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))},SwitchStatus:function(){return n.e("chunk-2d0e9431").then(n.bind(null,"8d7f"))},PopconfirmLink:function(){return n.e("chunk-f9b7a5e6").then(n.bind(null,"1417"))}},mixins:[l],computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({tableSize:function(t){return t.settings.tableSize}})),{},{showOperate:function(){var t=["Station","Site"];return t.includes(this.role)}}),watch:{"searchForm.ProvinceID":{handler:function(t){null!==t&&(this.selectDisabled=!1,this.placeholder="请选择",this._getSelSites(t))},immediate:!0}},created:function(){var t=this.$store.getters.mainRoles;this.role=t;var e=["Team","Station"];e.includes(t)&&(this.searchForm.ProvinceID=0),this.doLoad()},methods:{_getSelSites:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["k"])({ProvinceID:t});case 2:a=n.sent,a.success&&(e.provinceOptions=a.response);case 4:case"end":return n.stop()}}),n)})))()},doRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i,u,s,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pagination,a=n.currentPage,r=n.pageSize,i=t.searchForm,u=i.ProvinceID,s=i.SiteID,l={ProvinceID:u||0,SiteID:s||0,PageIndex:a,PageSize:r},e.next=4,Object(c["g"])(l);case 4:d=e.sent,d.success&&(t.tableData=d.data,t.pagination=Object(o["a"])(Object(o["a"])({},t.pagination),{},{currentPage:d.page,total:d.dataCount}));case 6:case"end":return e.stop()}}),e)})))()},doLoad:function(){this.doRefresh()},searchFormSubmit:function(){this.pagination.currentPage=1,this.doRefresh()},searchFormReset:function(){this.searchForm={ProvinceID:null,SiteID:null},this.searchFormSubmit()},doCreate:function(){this.$router.push({name:"CreateRoom"})},handleEdit:function(t){this.$router.push({name:"EditRoom",params:{id:t.ERIID}})},handleInnerSwitch:function(t,e,n,a){var r=this;n.confirmButtonLoading||("confirm"===e?(n.confirmButtonLoading=!0,n.confirmButtonText="提交中...",t.Status?Object(c["e"])({ERIID:t.ERIID}).then((function(e){a(),t.Status=!t.Status,n.confirmButtonLoading=!1,r.$notify({title:"成功",message:"停用成功",type:"success"})})).catch((function(t){n.confirmButtonLoading=!1,a(t)})):Object(c["f"])({ERIID:t.ERIID}).then((function(e){a(),t.Status=!t.Status,n.confirmButtonLoading=!1,r.$notify({title:"成功",message:"启用成功",type:"success"})})).catch((function(t){n.confirmButtonLoading=!1,a(t)}))):a())},handleDelete:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["d"])({ERIID:e.ERIID});case 2:r=a.sent,r.success&&(n.$notify({title:"成功",message:r.msg,type:"success"}),console.log("index",t),n.tableData.splice(t,1));case 4:case"end":return a.stop()}}),a)})))()},searchFormAreaChange:function(t){this.searchForm.ProvinceID=t.provinceCode},paginationCurrenChange:function(t){this.pagination.currentPage=t,this.doRefresh()},paginationSizeChange:function(t){this.pagination.pageSize=t,this.doRefresh()}}},m=d,p=n("2877"),f=Object(p["a"])(m,a,r,!1,null,null,null);e["default"]=f.exports},bcb6:function(t,e,n){"use strict";n.d(e,"m",(function(){return r})),n.d(e,"k",(function(){return i})),n.d(e,"r",(function(){return o})),n.d(e,"u",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"q",(function(){return l})),n.d(e,"p",(function(){return d})),n.d(e,"l",(function(){return m})),n.d(e,"s",(function(){return p})),n.d(e,"v",(function(){return f})),n.d(e,"g",(function(){return h})),n.d(e,"i",(function(){return b})),n.d(e,"t",(function(){return g})),n.d(e,"f",(function(){return S})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return O})),n.d(e,"j",(function(){return I})),n.d(e,"n",(function(){return j})),n.d(e,"w",(function(){return k})),n.d(e,"o",(function(){return w})),n.d(e,"c",(function(){return R})),n.d(e,"b",(function(){return D}));var a=n("b775");function r(t){return Object(a["a"])({url:"/vue-admin-template/station-management/review-detail",method:"get",params:t})}function i(t){return Object(a["a"])({url:"api/station/GetSiteAuditInfos",method:"get",params:t})}function o(t){return Object(a["a"])({url:"api/station/LoadSiteAuditInfo",method:"get",params:t})}function u(t){return Object(a["a"])({url:"api/station/SaveSiteAuditInfo",method:"post",data:t})}function c(t){return Object(a["a"])({url:"api/station/DelSiteAuditInfo",method:"get",params:t})}function s(t){return Object(a["a"])({url:"api/station/GetGuidanceSiteAuditInfos",method:"get",params:t})}function l(t){return Object(a["a"])({url:"api/station/LoadGuidanceSiteAuditInfo",method:"get",params:t})}function d(t){return Object(a["a"])({url:"api/station/GuidanceAuditSiteInfo",method:"post",data:t})}function m(t){return Object(a["a"])({url:"api/station/GetSiteInfos",method:"get",params:t})}function p(t){return Object(a["a"])({url:"api/station/LoadSiteInfo",method:"get",params:t})}function f(t){return Object(a["a"])({url:"api/station/SaveSiteInfo",method:"post",data:t})}function h(t){return Object(a["a"])({url:"api/station/ExamRoomList",method:"get",params:t})}function b(t){return Object(a["a"])({url:"api/station/LoadExamRoom",method:"get",params:t})}function g(t){return Object(a["a"])({url:"api/station/SaveExamRoom",method:"post",data:t})}function S(t){return Object(a["a"])({url:"api/station/EnableExamRooms",method:"get",params:t})}function v(t){return Object(a["a"])({url:"api/station/DisableExamRooms",method:"get",params:t})}function O(t){return Object(a["a"])({url:"api/station/DelExamRooms",method:"get",params:t})}function I(t){return Object(a["a"])({url:"api/Station/GetNotAuthTrainingInstitutions",method:"get",params:t})}function j(t){return Object(a["a"])({url:"api/Station/GetTrainingInstitutionInfo",method:"get",params:t})}function k(t){return Object(a["a"])({url:"api/Station/SubTrainingInstitutionAuth",method:"post",data:t})}function w(t){return Object(a["a"])({url:"api/Station/GetTrainingInstitutions",method:"get",params:t})}function R(t){return Object(a["a"])({url:"api/Station/EnableTrainingInstitution",method:"post",data:t})}function D(t){return Object(a["a"])({url:"api/Station/DisableTrainingInstitution",method:"post",data:t})}}}]);