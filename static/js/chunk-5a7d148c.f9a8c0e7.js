(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a7d148c"],{"3a33":function(e,t,a){},"3e0f":function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"h",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"k",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"c",(function(){return h})),a.d(t,"a",(function(){return y}));var n=a("b775");function r(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordPageList",method:"get",params:e})}function i(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordList",method:"get",params:e})}function l(e){return Object(n["a"])({url:"api/FeeManagement/ConfirmPay",method:"post",data:e})}function o(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordStats",method:"get",params:e})}function s(e){return Object(n["a"])({url:"api/FeeManagement/GetEnrollPayRecordDetail",method:"get",params:e})}function c(e){return Object(n["a"])({url:"api/FeeManagement/GetChargingRulesList",method:"get",params:e})}function u(e){return Object(n["a"])({url:"api/FeeManagement/UpdateChargingRulesSetting",method:"post",data:e})}function d(e){return Object(n["a"])({url:"api/FeeManagement/GetPayRecordReportResponsePageList",method:"get",params:e})}function p(e){return Object(n["a"])({url:"api/FeeManagement/GetPayRecordReportStats",method:"get",params:e})}function m(e){return Object(n["a"])({url:"api/FeeManagement/GetInvoiceRecordPageList",method:"get",params:e})}function h(e){return Object(n["a"])({url:"api/FeeManagement/GetBatchPayLogView",method:"get",params:e})}function y(e){return Object(n["a"])({url:"api/FeeManagement/ConfirmBatchInvoice",method:"post",useJSON:!0,data:e})}},"517c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-wrapper"},[a("el-form",{ref:"searchForm",attrs:{"label-position":"top",inline:"",size:e.tableSize},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},["Department"===e.roles||"Guidance"===e.roles?a("area-select",{attrs:{"area-label":"省份","show-city":!1,"province-code":e.searchForm.provinceID},on:{areaSelectChange:e.searchFormAreaChange}}):e._e(),a("profession-skill-select",{attrs:{label:"鉴定工种/等级/方向","first-level":e.searchForm.workCID,"second-level":e.searchForm.gradeCID,"third-level":e.searchForm.directionID,"show-third-level":!0},on:{selectChange:e.selectChange}}),a("el-form-item",{attrs:{label:"缴费方式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.payWay,callback:function(t){e.$set(e.searchForm,"payWay",t)},expression:"searchForm.payWay"}},e._l(e.payMethod_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"缴费类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.payType,callback:function(t){e.$set(e.searchForm,"payType",t)},expression:"searchForm.payType"}},e._l(e.payType_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"日期类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.dateType,callback:function(t){e.$set(e.searchForm,"dateType",t)},expression:"searchForm.dateType"}},e._l(e.dateType_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"日期范围"}},[a("date-range-picker",{model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),a("el-form-item",{attrs:{label:"搜索关键字",prop:"search_key"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"姓名/证件号码",clearable:""},model:{value:e.searchForm.search_key,callback:function(t){e.$set(e.searchForm,"search_key",t)},expression:"searchForm.search_key"}})],1),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchFormSubmit}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.searchFormReset}},[e._v("清空")])],1)],1)],1),a("table-body",{ref:"mkTable",attrs:{loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,"index-row":e.indexRow,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",{staticClass:"text-red"},[e._v("合计：")]),e._v(" 已缴费数据： "),a("strong",[e._v(e._s(e.money.PayTotal))]),e._v(" 条数据，已缴费金额： "),a("strong",{staticClass:"text-red"},[e._v(e._s(e.money.PayMoney))]),e._v(" 元，其中理论缴费： "),a("strong",{staticClass:"text-red"},[e._v(e._s(e.money.TheoryPayMoney))]),e._v(" 元，技能缴费： "),a("strong",{staticClass:"text-red"},[e._v(e._s(e.money.SkillPayMoney))]),e._v(" 元。 ")]),a("el-table-column",{directives:[{name:"permission",rawName:"v-permission",value:"look",expression:"'look'"}],attrs:{slot:"operate",label:"操作",width:"80",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleLook(n)}}},[e._v("查看")])]}}])})],1),a("el-dialog",{attrs:{title:"确认缴费",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("table-body",{attrs:{"has-padding":!1,columns:e.dtlColumns,"table-data":e.dtlTableData,options:e.tableOptions}}),e.dtlTableData.length?a("el-row",[a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v(" 缴费状态："+e._s(e.dtlTableData[0].PayStatus?1===e.dtlTableData[0].PayStatus?"已缴费":"已取消":"未缴费")+" ")]),a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v("缴费时间："+e._s(e._f("parseTime")(e.dtlTableData[0].PayDate,"{y}-{m}-{d} {h}:{i}:{s}")))]),1===e.dtlTableData[0].PayWay?a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v(" 缴费类型： "+e._s(1===e.dtlTableData[0].PayType?"微信":2===e.dtlTableData[0].PayType?"支付宝":3===e.dtlTableData[0].PayType?"网银":"现金")+" ")]):e._e(),1===e.dtlTableData[0].PayWay?a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v("交易单号："+e._s(e.dtlTableData[0].TransactionNum))]):e._e(),a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v(" 缴费方式： "+e._s(1===e.dtlTableData[0].PayType?"在线支付":2===e.dtlTableData[0].PayType?"手动确认":"待确认")+" ")]),a("el-col",{staticClass:"mb-10",attrs:{span:12}},[e._v("确认人："+e._s(e.dtlTableData[0].ConfirmAdminName))])],1):e._e()],1)],1)},r=[],i=(a("7db0"),a("b64b"),a("d3b7"),a("96cf"),a("1da1")),l=a("5530"),o=a("2f62"),s=a("ed08"),c=a("3e0f"),u={name:"Journaling",components:{AreaSelect:function(){return a.e("chunk-1bcfd332").then(a.bind(null,"a92d"))},DateRangePicker:function(){return a.e("chunk-2d210a9a").then(a.bind(null,"b99f"))},TableBody:function(){return a.e("chunk-79d593e5").then(a.bind(null,"2c21"))},ProfessionSkillSelect:function(){return a.e("chunk-74e90192").then(a.bind(null,"7c1d"))}},data:function(){var e=this;return{roles:"",searchPanelActive:!0,searchForm:{provinceID:null,workCID:null,gradeCID:null,directionID:null,payWay:null,payType:null,dateType:0,times:[],search_key:""},money:{PayTotal:0,PayMoney:0,TheoryPayMoney:0,SkillPayMoney:0},tableLoading:!1,columns:[{title:"姓名",key:"Name",align:"center",minWidth:100},{title:"证件号码",key:"IDCardNum",headerAlign:"center",minWidth:160},{title:"鉴定工种",key:"WorkCName",align:"center",minWidth:140},{title:"鉴定等级",key:"GradeCName",align:"center",minWidth:100},{title:"职业方向",key:"DirectionName",align:"center",minWidth:160},{title:"报名时间",key:"EnrollDate",align:"center",minWidth:160,formatter:function(e,t,a,n){return Object(s["e"])(e.EnrollDate,"{y}-{m}-{d} {h}:{i}")}},{title:"缴费科目",key:"PlanType",align:"center",minWidth:80,formatter:function(t,a,n,r){if("undefined"!==typeof t.PlanType)return e.subjectOptions.find((function(e){return e.value===t.PlanType})).label}},{title:"缴费来源",key:"Source",align:"center",minWidth:80,formatter:function(t,a,n,r){if("undefined"!==typeof t.Source)return e.source_options.find((function(e){return e.value===t.Source})).label}},{title:"缴费方式",key:"PayWay",align:"center",minWidth:80,formatter:function(t,a,n,r){if("undefined"!==typeof t.PayWay)return e.payMethod_options.find((function(e){return e.value===t.PayWay})).label}},{title:"缴费金额",key:"PayMoney",align:"center",minWidth:80},{title:"缴费类型",key:"PayType",align:"center",minWidth:80,formatter:function(t,a,n,r){if("undefined"!==typeof t.PayType)return e.payType_options.find((function(e){return e.value===t.PayType})).label}},{title:"缴费时间",key:"PayDate",align:"center",minWidth:160,formatter:function(e,t,a,n){return Object(s["e"])(e.PayDate,"{y}-{m}-{d} {h}:{i}")}}],tableData:[],indexRow:{title:"#",align:"center",width:"50px"},tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:0},dialogVisible:!1,dtlColumns:[{title:"姓名",key:"Name",align:"center",minWidth:100},{title:"证件号码",key:"IDCardNum",headerAlign:"center",minWidth:160},{title:"鉴定工种",key:"WorkName",align:"center",minWidth:140},{title:"鉴定等级",key:"GradeName",align:"center",minWidth:100},{title:"缴费科目",key:"PlanType",align:"center",minWidth:80,formatter:function(t,a,n,r){if("undefined"!==typeof t.PlanType)return e.subjectOptions.find((function(e){return e.value===t.PlanType})).label}},{title:"缴费金额",key:"PayMoney",align:"center",minWidth:80}],dtlTableData:[],payMethod_options:[{value:0,label:"待确认"},{value:1,label:"在线缴费"},{value:2,label:"手动确认"}],payType_options:[{value:0,label:"-"},{value:1,label:"微信"},{value:2,label:"支付宝"},{value:3,label:"网银"}],dateType_options:[{value:0,label:"报名时间"},{value:1,label:"缴费时间"}],subjectOptions:[{value:0,label:"理论"},{value:1,label:"技能"}],source_options:[{value:0,label:"待确认"},{value:1,label:"在线支付"},{value:2,label:"手动确认"}]}},computed:Object(l["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){var e=this.$store.getters.mainRoles;this.roles=e,"Team"!==e&&"Site"!==e||(this.searchForm.provinceID=0),this.doLoad()},methods:{fetchList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["j"])(e);case 2:n=a.sent,n.success&&(t.tableData=n.data,t.pagination.total=n.dataCount);case 4:case"end":return a.stop()}}),a)})))()},fetchStatistics:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["k"])(e);case 2:n=a.sent,n.success&&Object.keys(n.response).length&&(t.money=n.response);case 4:case"end":return a.stop()}}),a)})))()},doLoad:function(){this.doRefresh()},doRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,o,s,c,u,d,p,m,h,y,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchForm,n=a.provinceID,r=a.workCID,i=a.gradeCID,o=a.directionID,s=a.payWay,c=a.payType,u=a.times,d=a.search_key,p=a.dateType,m=e.pagination,h=m.currentPage,y=m.pageSize,f={provinceID:n||0,workCID:r||"",gradeCID:i||"",directionID:o||"",payWay:null===s?"":s,payType:null===c?"":c,dateType:p,dateStart:u.length?u[0]:"",dateEnd:u.length?u[1]:"",nameOrCardNo:d},t.next=4,e.fetchList(Object(l["a"])(Object(l["a"])({},f),{},{pageIndex:h,pageSize:y}));case 4:return t.next=6,e.fetchStatistics(f);case 6:case"end":return t.stop()}}),t)})))()},searchFormAreaChange:function(e){this.searchForm.provinceID=e.provinceCode},selectChange:function(e){this.searchForm=Object(l["a"])(Object(l["a"])({},this.searchForm),{},{workCID:e.firstLevel,gradeCID:e.secondLevel,directionID:e.thirdLevel})},searchFormSubmit:function(){this.pagination.currentPage=1,this.doRefresh()},searchFormReset:function(){this.searchForm={provinceID:null,workCID:null,gradeCID:null,directionID:null,payWay:null,payType:null,dateType:0,times:[],search_key:""},this.pagination.currentPage=1,this.doRefresh()},handleLook:function(e){var t=this;Object(c["e"])({payRecordID:e.PayRecordID}).then((function(e){t.dtlTableData=[e.response],t.dialogVisible=!0}))},handleClose:function(){this.dialogVisible=!1},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()}}},d=u,p=(a("f682"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,"1c8ea032",null);t["default"]=m.exports},f682:function(e,t,a){"use strict";var n=a("3a33"),r=a.n(n);r.a}}]);