(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3907f94"],{2934:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"j",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"d",(function(){return g}));var i=n("b775");function r(e){return Object(i["a"])({url:"api/Sys/CheckUserInfo",method:"get",noNoticeError:!0,params:e})}function a(e){return Object(i["a"])({url:"api/Sys/GetSelRoleList",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/Sys/GetEnableProfessionnalTitles",method:"get",params:e})}function s(e){return Object(i["a"])({url:"api/Sys/GetEnableExaminerProfessionnalTitles",method:"get",params:e})}function l(e){return Object(i["a"])({url:"api/Global/GetRegionList",method:"get",params:e})}function u(e){return Object(i["a"])({url:"api/Station/GetSelSites",method:"get",params:e})}function c(e){return Object(i["a"])({url:"api/Sys/EnableProfessionList",method:"get",params:e})}function d(e){return Object(i["a"])({url:"api/Examination/LoadQuestionBankOptions",method:"get",params:e})}function m(e){return Object(i["a"])({url:"api/Sys/GetEnableEQLanguages",method:"get",params:e})}function f(e){return Object(i["a"])({url:"api/Station/EnableExamRoomLst",method:"get",params:e})}function p(e){return Object(i["a"])({url:"images/Upload/TempPic",method:"post",data:e,multiple:!0})}function b(e){return Object(i["a"])({url:"images/Upload/TempFile",method:"post",data:e,multiple:!0})}function h(e){return Object(i["a"])({url:"api/images/Upload/NewPic",method:"post",data:e,multiple:!0})}function g(e){return Object(i["a"])({url:"api/Station/EnableExaminerInfos",method:"get",params:e})}},7305:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"permission",rawName:"v-permission",value:"create",expression:"'create'"}],staticClass:"search-wrapper",attrs:{flex:"main:right"}},[n("el-button",{attrs:{type:"primary",size:e.tableSize},on:{click:e.doCreate}},[e._v("添加站点")])],1),n("table-body",{ref:"mkTable",attrs:{"index-row":e.indexRow,loading:e.tableLoading,columns:e.columns,"table-data":e.tableData,options:e.tableOptions,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrenChange,"pagination-size-change":e.paginationSizeChange}},[n("el-table-column",{attrs:{slot:"AuditStatus",label:"审核状态",align:"center"},slot:"AuditStatus",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0==i.AuditStatus?n("span",[e._v("待审核")]):e._e(),1==i.AuditStatus?n("span",{staticClass:"text-green"},[e._v("已审核")]):e._e(),2==i.AuditStatus?n("span",{staticClass:"text-red"},[e._v("已驳回")]):e._e()]}}])}),n("el-table-column",{attrs:{slot:"operate",label:"操作",align:"center",fixed:"right"},slot:"operate",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0==i.AuditStatus?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"edit",expression:"'edit'"}],attrs:{type:"success"},on:{click:function(t){return e.handleEdit(i)}}},[e._v("修改")]):e._e(),0==i.AuditStatus?n("el-link",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],attrs:{type:"danger"},on:{click:function(t){return e.handleDelete(i)}}},[e._v("删除")]):e._e()]}}])})],1),n("el-dialog",{attrs:{title:e.isEdit?"修改站点":"添加站点",width:"40%","destroy-on-close":"",visible:e.elFormReviewShow,"before-close":e.handleElformHide,"close-on-click-modal":!1,"close-on-press-escape":!1}},[n("el-form",{ref:"elFormReview",attrs:{rules:e.elFormReviewRules,model:e.elFormReview,size:e.tableSize,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"联系人",prop:"UserName"}},[n("el-input",{attrs:{disabled:e.editDisabled},model:{value:e.elFormReview.UserName,callback:function(t){e.$set(e.elFormReview,"UserName",t)},expression:"elFormReview.UserName"}})],1),n("el-form-item",{attrs:{label:"身份证号",prop:"IDCardNum"}},[n("el-input",{attrs:{disabled:e.editDisabled},on:{blur:e.handleCheckUserInfo},model:{value:e.elFormReview.IDCardNum,callback:function(t){e.$set(e.elFormReview,"IDCardNum",t)},expression:"elFormReview.IDCardNum"}})],1),n("el-form-item",{attrs:{label:"站点名称",prop:"SiteName"}},[n("el-input",{model:{value:e.elFormReview.SiteName,callback:function(t){e.$set(e.elFormReview,"SiteName",t)},expression:"elFormReview.SiteName"}})],1),n("el-form-item",{attrs:{label:"类型",prop:"SiteType"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeSiteType},model:{value:e.elFormReview.SiteType,callback:function(t){e.$set(e.elFormReview,"SiteType",t)},expression:"elFormReview.SiteType"}},[n("el-option",{attrs:{label:"鉴定站",value:0}}),n("el-option",{attrs:{label:"鉴定点",value:1}})],1)],1),n("area-select",{attrs:{"area-label":"所属省市","area-prop":"RegionID","province-disabled":!0,"province-code":e.elFormReview.ProvinceID,"city-code":e.elFormReview.CityID,"region-code":e.elFormReview.RegionID,"show-region":!0},on:{areaSelectChange:e.changeArea}}),n("el-form-item",{attrs:{label:"联系方式",prop:"MobilePhone"}},[n("el-input",{attrs:{disabled:e.editDisabled},model:{value:e.elFormReview.MobilePhone,callback:function(t){e.$set(e.elFormReview,"MobilePhone","string"===typeof t?t.trim():t)},expression:"elFormReview.MobilePhone"}})],1),n("el-form-item",{attrs:{label:"通讯地址",prop:"Address"}},[n("el-input",{model:{value:e.elFormReview.Address,callback:function(t){e.$set(e.elFormReview,"Address","string"===typeof t?t.trim():t)},expression:"elFormReview.Address"}})],1),n("el-form-item",{attrs:{label:"职称",prop:"PTID"}},[n("el-select",{attrs:{placeholder:""===e.elFormReview.SiteType?"请先选择类型":"请选择",disabled:""===e.elFormReview.SiteType},model:{value:e.elFormReview.PTID,callback:function(t){e.$set(e.elFormReview,"PTID",t)},expression:"elFormReview.PTID"}},e._l(e.professionTitleOptions,(function(e){return n("el-option",{key:e.PTID,attrs:{label:e.Name,value:e.PTID}})})),1)],1),n("el-form-item",{attrs:{label:"系统角色",prop:"RoleID"}},[""===e.elFormReview.SiteType?n("span",[e._v("请先选择类型")]):n("el-radio-group",{model:{value:e.elFormReview.RoleID,callback:function(t){e.$set(e.elFormReview,"RoleID",t)},expression:"elFormReview.RoleID"}},e._l(e.roleOptions,(function(t){return n("el-radio",{key:t.key,attrs:{label:t.value}},[e._v(e._s(t.key))])})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",disabled:e.btnSubDisable},on:{click:e.handleSubmit}},[e._v("提交")]),n("el-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)],1),n("identity-confirmation",{attrs:{"user-confirm-visible":e.userConfirmVisible,"user-confirm":e.userConfirm},on:{userConfirmSure:e.userConfirmSure,userConfirmClose:e.userConfirmClose,userConfirmCancle:e.userConfirmCancle}})],1)},r=[],a=(n("4160"),n("b0c0"),n("d3b7"),n("159b"),n("5530")),o=n("2f62"),s=n("2934"),l=n("bcb6"),u=n("f26e"),c={name:"SiteReview",components:{AreaSelect:function(){return n.e("chunk-2d209560").then(n.bind(null,"a92d"))},TableBody:function(){return n.e("chunk-79d593e5").then(n.bind(null,"2c21"))},IdentityConfirmation:function(){return n.e("chunk-2d0c9758").then(n.bind(null,"58dc"))}},mixins:[u["a"]],computed:Object(a["a"])({},Object(o["c"])({tableSize:function(e){return e.settings.tableSize}})),created:function(){this.doLoad()},methods:{doLoad:function(){this.doRefresh()},doRefresh:function(){var e=this,t=this.pagination,n={PageIndex:t.currentPage,PageSize:t.pageSize};this.tableLoading=!0,Object(l["k"])(n).then((function(t){e.tableData=t.data,e.pagination.total=t.dataCount,e.tableLoading=!1})).catch((function(t){e.tableLoading=!1}))},doCreate:function(){var e=this;Object(l["r"])({SiteAuditID:0}).then((function(t){if(t.success){var n=t.response.AuditInfo;e.elFormReview.ProvinceID=n.ProvinceID,e.isEdit=!1,e.handleElformShow()}}))},handleElformShow:function(){this.elFormReviewShow=!0},handleElformHide:function(){this.handleCancel()},handleEdit:function(e){var t=this;Object(l["r"])({SiteAuditID:e.SiteAuditID}).then((function(e){if(e.success){var n=e.response.AuditInfo;t.elFormReview=n,console.log("--\x3eelFormReview",t.elFormReview),t.isEdit=!0,t.editDisabled=!0,t.handleElformShow()}}))},handleDelete:function(e){var t=this;this.$confirm("确定删除该站点吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={SiteAuditID:e.SiteAuditID};Object(l["a"])(n).then((function(e){e.success?(t.$message({type:"success",message:"删除成功"}),t.doRefresh()):t.$alert(e.msg,"删除失败",{confirmButtonText:"确定"})}))}))},handleDetail:function(e){this.$message({type:"warning",message:"功能开发中"})},changeArea:function(e){var t=e.provinceCode,n=e.cityCode,i=e.regionCode;this.elFormReview.ProvinceID=t,this.elFormReview.CityID=n,this.elFormReview.RegionID=i},changeSiteType:function(e){var t=this;Object(s["g"])({MainRole:e?4:5,InstitutionsID:0}).then((function(e){t.professionTitleOptions=e.response})),Object(s["j"])({SelMainRole:e?4:5,InstitutionsID:0}).then((function(e){e.response.forEach((function(e){e.key=e.RoleName,e.value=e.RoleID})),t.roleOptions=e.response})),this.elFormReview.PTID="",this.elFormReview.RoleID=""},handleSubmit:function(){var e=this;this.$refs["elFormReview"].validate((function(t){t&&(e.btnSubDisable=!0,Object(l["u"])(e.elFormReview).then((function(t){e.btnSubDisable=!1,t.success?(e.$message({type:"success",message:"操作成功"}),e.handleElformHide(),e.doRefresh()):e.$alert(t.msg,"操作失败",{confirmButtonText:"确定"})})).catch((function(){e.btnSubDisable=!1})))}))},handleCancel:function(){this.elFormReviewShow=!1,this.editDisabled=!1,this.elFormReview={SiteName:"",SiteType:"",ProvinceID:null,CityID:null,RegionID:null,Address:"",UserName:"",MobilePhone:"",PTID:"",IDCardNum:"",RoleID:""}},handleCheckUserInfo:function(e){var t=this,n=e.target.value;!this.elFormReview.isEdit&&n&&Object(s["a"])({IDCardNum:n,IDType:0}).then((function(e){if(e.success){var n=e.response;t.userConfirmVisible=!0,t.userConfirm={name:n.UserName,mobile:n.MobilePhone,idCard:n.IDCardNum}}}))},userConfirmCancle:function(){this.userConfirmClose()},userConfirmClose:function(){this.elFormReview.IDCardNum="",this.userConfirmVisible=!1,this.userConfirm={}},userConfirmSure:function(e){var t=this.userConfirm,n=t.name,i=t.mobile,r=t.idCard;this.userConfirmVisible=!1,this.editDisabled=!0,this.elFormReview=Object.assign(this.elFormReview,{UserName:n,MobilePhone:i,IDCardNum:r})},paginationCurrenChange:function(e){this.pagination.currentPage=e,this.doRefresh()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.doRefresh()}}},d=c,m=n("2877"),f=Object(m["a"])(d,i,r,!1,null,null,null);t["default"]=f.exports},bcb6:function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"k",(function(){return a})),n.d(t,"r",(function(){return o})),n.d(t,"u",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"q",(function(){return c})),n.d(t,"p",(function(){return d})),n.d(t,"l",(function(){return m})),n.d(t,"s",(function(){return f})),n.d(t,"v",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return R})),n.d(t,"j",(function(){return w})),n.d(t,"n",(function(){return I})),n.d(t,"w",(function(){return D})),n.d(t,"o",(function(){return C})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return O}));var i=n("b775");function r(e){return Object(i["a"])({url:"/vue-admin-template/station-management/review-detail",method:"get",params:e})}function a(e){return Object(i["a"])({url:"api/station/GetSiteAuditInfos",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/station/LoadSiteAuditInfo",method:"get",params:e})}function s(e){return Object(i["a"])({url:"api/station/SaveSiteAuditInfo",method:"post",data:e})}function l(e){return Object(i["a"])({url:"api/station/DelSiteAuditInfo",method:"get",params:e})}function u(e){return Object(i["a"])({url:"api/station/GetGuidanceSiteAuditInfos",method:"get",params:e})}function c(e){return Object(i["a"])({url:"api/station/LoadGuidanceSiteAuditInfo",method:"get",params:e})}function d(e){return Object(i["a"])({url:"api/station/GuidanceAuditSiteInfo",method:"post",data:e})}function m(e){return Object(i["a"])({url:"api/station/GetSiteInfos",method:"get",params:e})}function f(e){return Object(i["a"])({url:"api/station/LoadSiteInfo",method:"get",params:e})}function p(e){return Object(i["a"])({url:"api/station/SaveSiteInfo",method:"post",data:e})}function b(e){return Object(i["a"])({url:"api/station/ExamRoomList",method:"get",params:e})}function h(e){return Object(i["a"])({url:"api/station/LoadExamRoom",method:"get",params:e})}function g(e){return Object(i["a"])({url:"api/station/SaveExamRoom",method:"post",data:e})}function v(e){return Object(i["a"])({url:"api/station/EnableExamRooms",method:"get",params:e})}function S(e){return Object(i["a"])({url:"api/station/DisableExamRooms",method:"get",params:e})}function R(e){return Object(i["a"])({url:"api/station/DelExamRooms",method:"get",params:e})}function w(e){return Object(i["a"])({url:"api/Station/GetNotAuthTrainingInstitutions",method:"get",params:e})}function I(e){return Object(i["a"])({url:"api/Station/GetTrainingInstitutionInfo",method:"get",params:e})}function D(e){return Object(i["a"])({url:"api/Station/SubTrainingInstitutionAuth",method:"post",data:e})}function C(e){return Object(i["a"])({url:"api/Station/GetTrainingInstitutions",method:"get",params:e})}function y(e){return Object(i["a"])({url:"api/Station/EnableTrainingInstitution",method:"post",data:e})}function O(e){return Object(i["a"])({url:"api/Station/DisableTrainingInstitution",method:"post",data:e})}},f26e:function(e,t,n){"use strict";var i=n("61f7"),r=n("ed08");t["a"]={data:function(){return{professionTitleOptions:[],roleOptions:[],isEdit:!1,elFormReviewShow:!1,searchPanelActive:!0,columns:[{title:"类型",key:"SiteType",align:"center",formatter:function(e,t,n,i){var r="";switch(e.SiteType){case 0:r="鉴定站";break;case 1:r="鉴定点"}return r}},{title:"单位名称",key:"SiteName",align:"center"},{title:"地址",key:"Address",align:"center"},{title:"负责人姓名",key:"UserName",align:"center"},{title:"联系电话",key:"MobilePhone",align:"center"},{title:"审核状态",key:"AuditStatus",slot:"AuditStatus"},{title:"审核人",key:"AuditName",align:"center"},{title:"审核时间",key:"AuditTime",align:"center",formatter:function(e,t,n,i){return Object(r["e"])(e.AuditTime,"{y}-{m}-{d}")}}],indexRow:{title:"序号",align:"center",width:60},tableLoading:!1,tableData:[],tableOptions:{border:!0,headerCellClassName:"table-header-bg"},pagination:{currentPage:1,pageSize:20,total:1},elFormReview:{SiteName:"",SiteType:"",ProvinceID:null,CityID:null,RegionID:null,Address:"",UserName:"",MobilePhone:"",PTID:"",IDCardNum:"",RoleID:""},elFormReviewRules:{SiteName:[{required:!0,message:"请输入",trigger:"blur"}],SiteType:[{required:!0,message:"请选择",trigger:"change"}],RegionID:[{required:!0,message:"请选择",trigger:"change"}],Address:[{required:!0,message:"请输入",trigger:"blur"}],UserName:[{required:!0,message:"请输入",trigger:"blur"}],MobilePhone:[{required:!0,trigger:"change",validator:function(e,t,n){i["g"](t)?n():n(new Error("请输入正确手机号码"))}}],PTID:[{required:!0,message:"请输入",trigger:"change"}],IDCardNum:[{required:!0,trigger:"blur",validator:function(e,t,n){i["e"](t)?n():n(new Error("请输入正确身份证号"))}}],RoleID:[{required:!0,message:"请选择",trigger:"change"}]},editDisabled:!1,userConfirmVisible:!1,userConfirm:{name:"",mobile:"",idCard:""},btnSubDisable:!1}}}}}]);